<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn" >
<head>
<title>Embedded splashy - WIKI-HIT IBM CLUB</title>
<meta name="KEYWORDS" content="首页,ALP,Address,Android,Android Newbie Guide,Android Project Development,Android Research Field,Android Third Party Lib And Tool,BoardGame,CSAPP" />
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../../../../skins/common/wikiprintable.css' />
<script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
<style type='text/css'>
/*/*/ /*<![CDATA[*/
@import "../../../../skins/common/wikistandard.css";
@import "../../../s/t/a/MediaWiki%7EStandard.css.html";
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px; border-right: 1px solid gray; }
#article { margin-left: 152px; margin-right: 4px; }

/*]]>*/ /* */
</style>
</head>

<body bgcolor='#FFFFFF' onload=''>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
<td width='152' rowspan='1'>&nbsp;</td><td class="top" align='left' valign='top'>
<a href="../../../index.html" title="首页">首页</a> |
<a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> |
<a href="../../../e/m/b/Embedded_splashy.html" title="Embedded splashy">编辑本页</a> |
<a href="../../../e/m/b/Embedded_splashy.html" title="Embedded splashy">较早版本</a><p class='subtitle'><a href="../../../e/m/b/Embedded_splashy.html">可打印版</a> | <a href="../../../g/e/n/WIKI-HIT_IBM_CLUB%7EGeneral_disclaimer.html" title="WIKI-HIT IBM CLUB:General disclaimer">Disclaimers</a></p>
</td>
<td class="top" valign='top' align='right' nowrap='nowrap'>Not logged in
<br /><a href="../../../u/s/e/Special%7EUserlogin.html" title="Special:Userlogin">登录</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html" title="Wikipedia:帮助">帮助</a>
<br /><form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form></td></tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">Embedded splashy</h1><p class='subtitle'>Wikipedia，自由的百科全书</p>
<p>首先认识一下splashy
</p><p>Splashy is a next generation boot splashing system for Linux systems. Unlike other splashig systems, it needs no patches to the kernel and it’s installed like a normal package. Make your boot process eye-candy with Splashy!
</p><p>关于splashy的简单的原理：
</p><p>Splashy doesn’t depend on any kernel patch or any boot loader. All you need is to tell the kernel to load a virtual-frame-buffer (fb) as soon as possible (before Splashy starts). The best way to do this is to edit your bootloader’s config file as stated previously.
</p>
<ul><li> 引导器开始正常引导，它设置帧缓冲（vga=值）并调用init。感谢智能postinst脚本能在安装时为帧缓冲自动设置最恰当的值并在卸载工序中删除它。
</li></ul>
<ul><li> init被缺省调用（这里没有修改inittab也没有打/或/etc/init.d/rc补丁）第一个被执行的脚本是S01 splashy，该脚本使得/sbin/splashy在后台运行（在init前被首先挂载）
</li></ul>
<ul><li> Splashy尽可能快的显示图片（该图片在cml配置文件中设置）并象人眼所做的那样阅读终端（注意研究显示这是一种最佳方式）
</li></ul>
<ul><li> Splashy 动态更新帧缓冲进度条，直到gdm/xdm被调用。
</li></ul>
<ul><li> 当X被调用，/dev/tty7初始完成并从控制台切换过来时，Splashy不再链接任何控制台（你已经切换到tty7了），七秒后关闭自身。
</li></ul>
<p>引导过程完成
</p><p>关闭过程也是一样：
</p>
<ul><li> Splashy被尽可能快的调用，然后显示图片以替代基于文本的关闭过程
</li></ul>
<p>"/sbin/splashy boot"
</p>
<pre>      Used when booting your system. This is run automatically by a initrc script during boot.  Scripts will talk to
      splashy using a FIFO by default /etc/splashy/splashy.fifo. See FILES.
</pre>
<p>"/sbin/splashy shutdown"
</p>
<pre>      Similar in spirit to boot, but run during shutdown. This is run automatically by a initrc script during shut-
      down. Scripts will talk to splashy using a FIFO by default /etc/splashy/splashy.fifo. See FILES.
</pre>
<p><br />
</p><p>splashy不依赖于任何的内核补丁，但是它同样的需要initrd.img的支持.
Every time Splashy’s config.xml file is updated the initramfs must be updated with it! Otherwise Splashy will not be aware of the changes and it will seem as if it was ignoring them.
每一次/etc/splashy/config.xml变更，都需要重新生成一个initrd.img来代替原来的intrd.img。
</p><p>在新的splashy的版本当中，可以支持动画（有待测试）：
</p><p>Lots of image/animation file formats supported: jpg, png, gif, mpg, swf
</p><p>Splashy需要的支持
</p><p>Libraries required to use Splashy:
</p>
<pre>     directfb 0.9.22 and up
     glib2
     libjpeg and/or libpng (optional)
</pre>
<p>However, Splashy is usually distributed as a static binary. So, in most cases, it requires no more than just the GNU standard C library (glibc).
</p><p>Splashy的移植：
</p><p>Depends: libc6 (>= 2.3.4-1), libdirectfb-0.9-22, libglib2.0-0 (>= 2.8.0), zlib1g (>= 1:1.2.1), lsb-base | lsb
</p><p>debian:/usr/lib# whereis splashy
splashy: /sbin/splashy /etc/splashy /usr/share/man/man1/splashy.1.gz
debian:/usr/lib# ldd /sbin/splashy
</p>
<pre>       linux-gate.so.1 =>  (0xffffe000)
       libpthread.so.0 => /lib/tls/libpthread.so.0 (0xb7f50000)
       libm.so.6 => /lib/tls/libm.so.6 (0xb7f2a000)
       libc.so.6 => /lib/tls/libc.so.6 (0xb7df1000)
       /lib/ld-linux.so.2 (0xb7f71000)
</pre>
<p>还有一些库：
libdirectfb, glib2 and the optional libjpeg and libpng(USB系统上这些都已经有了)
</p><p>splashy是基于LSB（Linux standard base）的,所以需要一些在/lib/lsb下有支持，/lib/lsb/init-funtion
</p><p>关于启动脚本的顺序分析：
</p><p>由于spalshy是做启动画面的，所以要考虑启动脚本的顺序问题。
启动脚本一般都在/etc/rc.d/rcx.d里面，对于Debian，还有一个rcS.d,里面是一些开机必起的脚本，所以splashy可以放在那里。对于RedHat，可以将splashy的启动放在rc.sysinit或者是每一个rcx.d里面。rcx.d目录下的脚本都是一些链接，链接到/etc/rc.d/init.d/目录下的脚本。所有的启动初始化的脚本都放在 init.d目录下。
</p><p>rcx.d目录下的初始化脚本的启动顺序是：按照顺序启动以S开头的脚本。我们把splashy放在虚拟文件系统挂载之后，比较靠前的位置，这样可以比较早的执行splashy,来显示开机画面。
确定splashy加载的位置，要根据系统而定。由于我们的文件系统中rc.d目录下没有rcx.d目录，而是rcx.d文件，所以我们就必须在rcx.d中添加上调用splashy的命令。
</p><p>参考资料：
</p><p><a href="http://splashy.alioth.debian.org/wiki/doku.php" class='external free' title="http://splashy.alioth.debian.org/wiki/doku.php" rel="nofollow">http://splashy.alioth.debian.org/wiki/doku.php</a> splashy的官方网站
</p><p><a href="http://old.ubuntu.org.cn/support/documentation/wiki/Splashy" class='external free' title="http://old.ubuntu.org.cn/support/documentation/wiki/Splashy" rel="nofollow">http://old.ubuntu.org.cn/support/documentation/wiki/Splashy</a>
</p>
<div class="printfooter">
<p>取自"<a href="http://dns.cs.hit.edu.cn../../../e/m/b/Embedded_splashy.html">http://dns.cs.hit.edu.cn../../../e/m/b/Embedded_splashy.html</a>"</p>

<p>本页面已经被浏览39次。 This page was last modified 06:05 2006年5月7日 by 匿名用户.  </p>
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'><strong><a href="../../../e/m/b/Embedded_splashy.html" title="Embedded splashy">编辑本页</a></strong> |
<a href="../../../e/m/b/Talk%7EEmbedded_splashy.html" class="new" title="Talk:Embedded splashy">讨论本页</a> |
<a href="../../../e/m/b/Embedded_splashy.html" title="Embedded splashy">较早版本</a> |
<a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a> |
<a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><br />

<br /><a href="../../../index.html" title="首页">首页</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%85%B3%E4%BA%8E.html" title="Wikipedia:关于">关于Wikipedia</a> | <a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> | <form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form><br /><span id="pagestats">本页面已经被浏览39次。 This page was last modified 06:05 2006年5月7日 by 匿名用户.  </span></td></tr></table>
</div>
</div>

<div id='quickbar'>
<a href='../../../index.html'><img src='../../../../skins/common/images/wiki.jpg' alt='[首页]' /></a>
<hr class='sep' /><a href="../../../index.html">首页</a>
<br /><a href="../../../c/o/m/WIKI-HIT_IBM_CLUB%7ECommunity_Portal_9150.html">社区</a>
<br /><a href="../../../c/u/r/Current_events.html">新闻动态</a>
<br /><a href="../../../r/e/c/Special%7ERecentchanges.html">最近更改</a>
<br /><a href="../../../r/a/n/Special%7ERandom.html">随机页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html">帮助</a>
<br /><a href="../../../s/i/t/WIKI-HIT_IBM_CLUB%7ESite_support.html">Donations</a>
<br />
<hr class='sep' /><strong><a href="../../../e/m/b/Embedded_splashy.html" title="Embedded splashy">编辑本页</a></strong>
<br /><a href="../../../e/m/b/Talk%7EEmbedded_splashy.html" class="new" title="Talk:Embedded splashy">讨论本页</a>
<br /><a href="../../../e/m/b/Embedded_splashy.html" title="Embedded splashy">较早版本</a>
<br /><a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a>
<br /><a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><hr class='sep' /><a href="../../../s/p/e/Special%7ESpecialpages.html" title="Special:Specialpages">特殊页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A.html" title="Wikipedia:错误报告">错误报告</a>
<br /></div>
<!-- Served by dns.cs.hit.edu.cn in 1351392682.66 secs. -->
</body></html>