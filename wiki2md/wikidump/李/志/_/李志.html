<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn" >
<head>
<title>李志 - WIKI-HIT IBM CLUB</title>
<meta name="KEYWORDS" content="首页,ALP,Address,Android,Android Newbie Guide,Android Project Development,Android Research Field,Android Third Party Lib And Tool,BoardGame,CSAPP" />
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../../../../skins/common/wikiprintable.css' />
<script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
<style type='text/css'>
/*/*/ /*<![CDATA[*/
@import "../../../../skins/common/wikistandard.css";
@import "../../../s/t/a/MediaWiki%7EStandard.css.html";
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px; border-right: 1px solid gray; }
#article { margin-left: 152px; margin-right: 4px; }

/*]]>*/ /* */
</style>
</head>

<body bgcolor='#FFFFFF' onload=''>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
<td width='152' rowspan='1'>&nbsp;</td><td class="top" align='left' valign='top'>
<a href="../../../index.html" title="首页">首页</a> |
<a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> |
<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑本页</a> |
<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">较早版本</a><p class='subtitle'><a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html">可打印版</a> | <a href="../../../g/e/n/WIKI-HIT_IBM_CLUB%7EGeneral_disclaimer.html" title="WIKI-HIT IBM CLUB:General disclaimer">Disclaimers</a></p>
</td>
<td class="top" valign='top' align='right' nowrap='nowrap'>Not logged in
<br /><a href="../../../u/s/e/Special%7EUserlogin.html" title="Special:Userlogin">登录</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html" title="Wikipedia:帮助">帮助</a>
<br /><form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form></td></tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">李志</h1><p class='subtitle'>Wikipedia，自由的百科全书</p>
<table id='toc' class='toc'><tr><td><div id='toctitle'><h2>目录</h2></div>
<ul>
<li class='toclevel-1'><a href="#5-14_proxy.pac"><span class="tocnumber">1</span> <span class="toctext">5-14 proxy.pac</span></a>
<ul>
<li class='toclevel-2'><a href="#.E4.BF.AE.E6.94.B9.E4.BA.86.E8.8A.B1.E5.88.BA.E4.BB.A3.E7.90.86.E4.B8.AD.E7.9A.84.E8.87.AA.E5.8A.A8.E4.BB.A3.E7.90.86.E9.85.8D.E7.BD.AE.E8.84.9A.E6.9C.AC.E6.A8.A1.E6.9D.BF"><span class="tocnumber">1.1</span> <span class="toctext">修改了花刺代理中的自动代理配置脚本模板</span></a></li>
<li class='toclevel-2'><a href="#.E9.81.97.E7.95.99.E9.97.AE.E9.A2.98"><span class="tocnumber">1.2</span> <span class="toctext">遗留问题</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="#6-3_hippo-register.26.26login"><span class="tocnumber">2</span> <span class="toctext">6-3 hippo-register&amp;&amp;login</span></a></li>
<li class='toclevel-1'><a href="#7-16_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"><span class="tocnumber">3</span> <span class="toctext">7-16 工作记录</span></a></li>
<li class='toclevel-1'><a href="#7-17_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"><span class="tocnumber">4</span> <span class="toctext">7-17 工作记录</span></a></li>
<li class='toclevel-1'><a href="#7-18_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"><span class="tocnumber">5</span> <span class="toctext">7-18 工作记录</span></a></li>
<li class='toclevel-1'><a href="#7-19_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"><span class="tocnumber">6</span> <span class="toctext">7-19 工作记录</span></a></li>
<li class='toclevel-1'><a href="#7-20_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"><span class="tocnumber">7</span> <span class="toctext">7-20 工作记录</span></a></li>
<li class='toclevel-1'><a href="#7-21_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"><span class="tocnumber">8</span> <span class="toctext">7-21 工作记录</span></a></li>
<li class='toclevel-1'><a href="#7-22_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"><span class="tocnumber">9</span> <span class="toctext">7-22 工作记录</span></a></li>
<li class='toclevel-1'><a href="#7-23_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"><span class="tocnumber">10</span> <span class="toctext">7-23 工作记录</span></a></li>
<li class='toclevel-1'><a href="#7-24.E8.87.B37-27.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"><span class="tocnumber">11</span> <span class="toctext">7-24至7-27工作记录</span></a></li>
</ul>
</td></tr></table>
<p><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "显示"; var tocHideText = "隐藏"; showTocToggle(); } </script>
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="5-14_proxy.pac"></a><h2>5-14 proxy.pac</h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name=".E4.BF.AE.E6.94.B9.E4.BA.86.E8.8A.B1.E5.88.BA.E4.BB.A3.E7.90.86.E4.B8.AD.E7.9A.84.E8.87.AA.E5.8A.A8.E4.BB.A3.E7.90.86.E9.85.8D.E7.BD.AE.E8.84.9A.E6.9C.AC.E6.A8.A1.E6.9D.BF"></a><h3>修改了花刺代理中的自动代理配置脚本模板</h3>
<ol><li>更新了免费代理列表<br />
</li><li>针对自己经常访问的一些网站，设置相应的代理规则<br />
</li><li>遇到的问题<br />
</li></ol>
<p>一个语句的大小写错误，导致代理脚本不能正常使用，仅仅能访问国内站点。起初我以为是我
的ip列表有问题，慢慢但是备份文件使用ip列表后正常，可以确定是在我自定义的地方出现问
题，注释后，一行行检查，终于找到了，原来函数大小写错误。。。<br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name=".E9.81.97.E7.95.99.E9.97.AE.E9.A2.98"></a><h3>遗留问题</h3>
<p>脚本在一些地方判断网站，另外一些地方又判断IP，难免有功能重复的地方，虽然不影响性能
但是还是很不爽，可惜判断数量实在太多，没有办法逐个检验了
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="6-3_hippo-register.26.26login"></a><h2>6-3 hippo-register&amp;&amp;login</h2>
<p>简单地修改了leagle原来以用户名作为基础的注册和登录脚本，改作以email为基础。对于email是否使用过采用xajax，对于email格式的判断采用javascript。但是格式判断有一个不好的地方是，判断是在点击提交后发生，我想应该可以放在填写完毕后立即触发是不是使用email注册、登录后实现起来太简单了，感觉没有什么需要实现的，也许还没有想到吧。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="7-16_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"></a><h2>7-16 工作记录</h2>
<p>8：40-10：30 终于把拖欠了很长时间的代码规范提交到wiki上，基本上都是大家能够达成共识的内容<br />
10：30-11：30 查看xajax的用户，逐渐熟悉其用法<br />
下午没有来实验室<br />
17：30-18：30 上网，聊天：）<br />
19：00-20：30 F－BLOG开会，我也参与讨论<br />
20：30-21：30 处理hippo中login.php的问题，问题在我的机器上无法登录。在hippo上能够正常使用，经过测试，发现是参数没有传递到，然而，两边的代码是一样，没有理由这样阿。狂晕。。。明天继续。。。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="7-17_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"></a><h2>7-17 工作记录</h2>
<p>8：30-11：00 解决本机无法login的问题，原来是全局变量的选项没有打开。和leagle商量后，决定统一采用$_POST["submit"]的形式，写入wiki上的技术细节<br />
13：00-14：00 完成了php随机产生指定长度的字符串的函数，备用<br />
14：00-15：30 完成忘记密码后的处理工作，即forgot_passwd.php<br />
15：30-16：00 完善register.php的功能，以前是以用户名做唯一标识，改作email后，没有处理同一email多次注册的问题，现在解决
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="7-18_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"></a><h2>7-18 工作记录</h2>
<p>今天主要是分析了hippo/book/search.php文件，以前是leagle写的，但是现在不行了，有些问题，比如说o'reilly的opensearch访问不了了，所以必须去除；原来没有取出link，现在需要它来进行二次采样。今天好不容易才把它取出来，然后就是应该二次处理了。<br />
今天没有写什么代码，主要是一些小修补，唉，全局变量的问题，太痛苦了。等着Sunnan回来，看他受折磨。。。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="7-19_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"></a><h2>7-19 工作记录</h2>
<p>尝试处理html文件，试图得到其中包含的图书信息，困难很大。。。<br />
按照计划，转向好友的处理中，基本实现查找、添加、删除函数
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="7-20_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"></a><h2>7-20 工作记录</h2>
<p>继续修改完善friends_fun.inc
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="7-21_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"></a><h2>7-21 工作记录</h2>
<p>开始写group_fun.php，是用户组操作的相关函数<br />
感觉现在的工作重复性比较大，积极性比较低。。。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="7-22_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"></a><h2>7-22 工作记录</h2>
<p>完成了group_fun.php,修改了group_fun.php和friends_fun.inc中函数参数的传递形式<br />
开始安装预定义的函数到页面上，发现这个才是比较麻烦的事情，html不是很熟，还需要javascript，呵呵，比较头疼
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="7-23_.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"></a><h2>7-23 工作记录</h2>
<p>完成view_group.php,仅仅可以加入或者退出小组<br />
修改group_fun.inc中的quit_group函数，放弃原来的群创建者退出群后自动解散群的设定
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑</a>]</div><a name="7-24.E8.87.B37-27.E5.B7.A5.E4.BD.9C.E8.AE.B0.E5.BD.95"></a><h2>7-24至7-27工作记录</h2>
<p>这几天我们分了一下工，leagle和sunan继续web，后台的开发工作，主要是书籍管理的内容，而我呢，转到一个数据采集工作。<br />我们需要从豆瓣上采集图书的基本信息，开始的时候，我沿着leagle以前的思路，准备采用豆瓣提供的opensearch。但是我发现一个问题，就是豆瓣返回的xml文档中信息不全，而且有乱码，无法正常解析。看来我必须去解析书籍本身的html文档了，这个时候我遇到了一个问题，就是html的url怎么获得的问题。在前面提到的xml文件中有一个link元素，那就是需要的url。但是我觉得这样实现很不好：首先，用php和dom得到xml，然后提取link存取到文件中，用perl正则表达式解析的时候再从文件里一个个读取下载，最后再把解析的数据写到数据库中。<br />我觉得这样处理很不自然，分析了需要的文件之后，我发现所有的usl就是最后的7位id不一样，而且还有一定的连贯性。于是我决定了直接下载所有的html，然后再解析。那个时候，我没有意识到这个有多么困难，以为仅仅是时间问题。明确了大致思路后，我首先开始写perl处理html的代码，应该说难度不大，但是对于我来说，嘿嘿，perl就知道一点点，所以不知觉地就犯了很多细小的错误，到处查资料，去水木，google group问，终于解决了大多数的问题，但是还有个小小的问题，致使我只能把部分解析动作写在了另一个pl脚本里，哎。。。<br />
正应了那句老话，好玩的才刚刚开始呢。。。我要得到可以用来解析的html文档啊，我晕，我天真的以为只需要一个循环就行了。当我下载了20个之后，我被ban了，我狂晕。然后我就开始想怎么才能不被ban呢？两次下载之间sleep若干时间，不行；两个代理来回换，不行；ft，我咋这么笨呢？多几个代理换多好啊，我又徒劳地尝试了几个方式，都是不行。最后可让我想到现在这个办法，若干代理自动换、sleep 3妙、wget连接个数限制、不用域名改用ip，使用它们，问题基本得到解决<br />
现在存在的问题是代理不是很稳定，看来要好好找找了；被ban的可能性还是存在，但是现在下载了700了，还没有这个迹象；这样速度比较慢，可能是59的机器不是太好，晚上换到53上试试；最后就是自动化程度不完全，还是有些需要手动的地方
</p>
<div class="printfooter">
<p>取自"<a href="http://dns.cs.hit.edu.cn../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html">http://dns.cs.hit.edu.cn../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html</a>"</p>

<p>本页面已经被浏览69次。 This page was last modified 06:47 2006年7月25日 by <a href="../../../%E6%9D%8E/%E5%BF%97/_/User%7E%E6%9D%8E%E5%BF%97.html" class="new" title="User:李志">李志</a>.  </p>
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'><strong><a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑本页</a></strong> |
<a href="../../../%E6%9D%8E/%E5%BF%97/_/Talk%7E%E6%9D%8E%E5%BF%97.html" class="new" title="Talk:李志">讨论本页</a> |
<a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">较早版本</a> |
<a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a> |
<a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><br />

<br /><a href="../../../index.html" title="首页">首页</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%85%B3%E4%BA%8E.html" title="Wikipedia:关于">关于Wikipedia</a> | <a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> | <form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form><br /><span id="pagestats">本页面已经被浏览69次。 This page was last modified 06:47 2006年7月25日 by <a href="../../../%E6%9D%8E/%E5%BF%97/_/User%7E%E6%9D%8E%E5%BF%97.html" class="new" title="User:李志">李志</a>.  </span></td></tr></table>
</div>
</div>

<div id='quickbar'>
<a href='../../../index.html'><img src='../../../../skins/common/images/wiki.jpg' alt='[首页]' /></a>
<hr class='sep' /><a href="../../../index.html">首页</a>
<br /><a href="../../../c/o/m/WIKI-HIT_IBM_CLUB%7ECommunity_Portal_9150.html">社区</a>
<br /><a href="../../../c/u/r/Current_events.html">新闻动态</a>
<br /><a href="../../../r/e/c/Special%7ERecentchanges.html">最近更改</a>
<br /><a href="../../../r/a/n/Special%7ERandom.html">随机页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html">帮助</a>
<br /><a href="../../../s/i/t/WIKI-HIT_IBM_CLUB%7ESite_support.html">Donations</a>
<br />
<hr class='sep' /><strong><a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">编辑本页</a></strong>
<br /><a href="../../../%E6%9D%8E/%E5%BF%97/_/Talk%7E%E6%9D%8E%E5%BF%97.html" class="new" title="Talk:李志">讨论本页</a>
<br /><a href="../../../%E6%9D%8E/%E5%BF%97/_/%E6%9D%8E%E5%BF%97.html" title="李志">较早版本</a>
<br /><a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a>
<br /><a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><hr class='sep' /><a href="../../../s/p/e/Special%7ESpecialpages.html" title="Special:Specialpages">特殊页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A.html" title="Wikipedia:错误报告">错误报告</a>
<br /></div>
<!-- Served by dns.cs.hit.edu.cn in 1351392700.22 secs. -->
</body></html>