<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn" >
<head>
<title>Bootchart - WIKI-HIT IBM CLUB</title>
<meta name="KEYWORDS" content="首页,ALP,Address,Android,Android Newbie Guide,Android Project Development,Android Research Field,Android Third Party Lib And Tool,BoardGame,CSAPP" />
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../../../../skins/common/wikiprintable.css' />
<script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
<style type='text/css'>
/*/*/ /*<![CDATA[*/
@import "../../../../skins/common/wikistandard.css";
@import "../../../s/t/a/MediaWiki%7EStandard.css.html";
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px; border-right: 1px solid gray; }
#article { margin-left: 152px; margin-right: 4px; }

/*]]>*/ /* */
</style>
</head>

<body bgcolor='#FFFFFF' onload=''>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
<td width='152' rowspan='1'>&nbsp;</td><td class="top" align='left' valign='top'>
<a href="../../../index.html" title="首页">首页</a> |
<a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> |
<a href="../../../b/o/o/Bootchart.html" title="Bootchart">编辑本页</a> |
<a href="../../../b/o/o/Bootchart.html" title="Bootchart">较早版本</a><p class='subtitle'><a href="../../../b/o/o/Bootchart.html">可打印版</a> | <a href="../../../g/e/n/WIKI-HIT_IBM_CLUB%7EGeneral_disclaimer.html" title="WIKI-HIT IBM CLUB:General disclaimer">Disclaimers</a></p>
</td>
<td class="top" valign='top' align='right' nowrap='nowrap'>Not logged in
<br /><a href="../../../u/s/e/Special%7EUserlogin.html" title="Special:Userlogin">登录</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html" title="Wikipedia:帮助">帮助</a>
<br /><form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form></td></tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">Bootchart</h1><p class='subtitle'>Wikipedia，自由的百科全书</p>
<p>看之前可以先参考 <a href="http://www.bootchart.org" class='external free' title="http://www.bootchart.org" rel="nofollow">http://www.bootchart.org</a>
</p><p>/***********************
bootchart的简介
</p><p><br />
Bootchart是以个把启动进程的性能分析可视化显示出来的工具.它在启动进程知性的过程中收集资源利用状况和进程信息并且可以在用PNG,SVG或EPS编码的图表中显示出来
启动进程被修改成启动boot logger(/sbin/bootchartd)而不是/sbin/init.Boot logger会在后台进行并从proc文件系统(/proc/[PID]/stat, /proc/stat 和 /proc/diskstats)中收集信息.这些统计资料记录在虚拟内存系统(tmpfs).一旦启动进程完成,日志文件被打包到/var/log/bootchart.tgz
这个日志包稍后会被一个Java应用程序执行,会生成进程树并行成一张性能图表.这个图表会被拿来做分析来检查进程依赖关系和全面的资源利用情况.
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li>/
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<p><br />
/**********************
</p><p>bootchart的使用:
</p><p><br />
1.下载bootchart的安装包(<a href="http://www.bootchart.org/download.html)到某个目录(/home/yourname/bootchart)" class='external free' title="http://www.bootchart.org/download.html)到某个目录(/home/yourname/bootchart)" rel="nofollow">http://www.bootchart.org/download.html)到某个目录(/home/yourname/bootchart)</a>
</p><p>2.解压缩这个安装包
</p><p>3.运行里面的install-sh安装脚本
</p><p>4.编辑/boot/grub/menu.lst
</p><p>5.修改如下(如果用Fedora就不用这么做,会自动在/boot/grub/menu.lst里加上)
</p><p>	将
</p><p>		    title           Ubuntu, kernel 2.6.15.1
</p><p>		    root            (hd0,0)
</p><p>		    kernel          /boot/vmlinuz-2.6.15.1 root=/dev/hda1 
</p><p>		    initrd          /boot/initrd.img-2.6.15.1
</p><p>		    savedefault
</p><p>		    boot
</p><p>	改为
</p><p>		    title           Ubuntu, kernel 2.6.15.1
</p><p>		    root            (hd0,0)
</p><p>		    kernel          /boot/vmlinuz-2.6.15.1 root=/dev/hda1 init=/sbin/bootchartd
</p><p>		    initrd          /boot/initrd.img-2.6.15.1
</p><p>		    savedefault
</p><p>		    boot
</p><p><br />
6.重新启动计算机,然后在/var/log/下会有bootchartd.tgz .里面就是bootchart在启动时所测得的数据
</p><p>7.将这个bootchartd.tgz提交到<a href="http://www.bootchart.org/download.html" class='external free' title="http://www.bootchart.org/download.html" rel="nofollow">http://www.bootchart.org/download.html</a>  (页面下面有Renderer Web Form,在那里提交,提交前先选择所返回的图片的格式,EPS,PGN或SVG)
</p><p>8.用返回的图表对启动信息进行分析
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li>/
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<p>/********************
</p><p>bootchart对系统的影响
无影响,启动所用的时间与安不安装bootchart无关.
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li>/
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
<p><br />
/********************
</p><p>bootchart结果分析
</p><p>参考所得到的图表以及.log文件
</p><p>分析图表:
</p><p>图表分为两部分:文本部分和图表部分
</p><p>先看文本部分,图表的开头的一段文字介绍了这张图表的制作的时间及提交.log文件的用户名及用户所使用的机器的相关信息.这些信息存放在bootchartd.tgz中的header文件中.
</p><p>在我的机器上是这样显示的
</p><p>version = 0.8
</p><p>title = Boot chart for simple (Mon Apr 24 17:56:10 CST 2006)
</p><p>system.uname = Linux 2.6.15.1 #1 Thu Apr 20 20:33:05 CST 2006 i686
</p><p>system.release = Debian GNU/Linux testing/unstable
</p><p>system.cpu = model name&nbsp;: Intel(R) Pentium(R) 4 CPU 3.00GHz (1)
</p><p>system.kernel.options = root=/dev/hda1 ro quiet splash init=/sbin/bootchartd
</p><p>对应到图表中 version = 0.8 被忽略掉   在第一行显示 Boot chart for simple (Wed May 17 18:41:33 CST 2006) 这表示是谁提交的这份数据,括号利的时间是这份图表制作的时间而head文件中对应这行的括号利的时间是指bootchartd.tgz生成的时间
</p><p>第二行显示 uname&nbsp;: Linux 2.6.15.1 #1 Thu Apr 20 20:33:05 CST 2006 i686  这是我的机器所用的linux的内核版本
</p><p>第三行显示 release&nbsp;: Debian GNU/Linux testing/unstable  这是我所用的发行版
</p><p>第四行显示 CPU&nbsp;: Intel(R) Pentium(R) 4 CPU 3.00GHz (1)  这是处理器的信息
</p><p>第五行显示 kernel options&nbsp;: root=/dev/hda1 init=/sbin/bootchartd  启动脚本
</p><p>最后一行显示 time&nbsp;: 0:50  启动共用了50秒 
</p><p><br />
接下来就是图表部分了
</p><p>图表部分分为三段:
</p><p>1.CPU的使用状况图(参考proc_stat.log文件)
</p><p>	CPU(user+sys)(蓝色部分)与I/O(wait)(粉色部分)的工作时间的分配.I/O与CPU分时占用总线与内存进行数据交换.(我认为用的是类似DMA方式)
</p>
<pre>       当CPU在占用总线,同时I/O也要占用总线时,I/O就会wait.
</pre>
<p>2.磁盘的使用状况图(参考proc_diskstats.log文件)
</p>
<pre>       在该部分中,绿线是磁盘的吞吐量,粉色部分是磁盘利用情况.可以看到,磁盘吞吐量
       最大时达到了22MB/s
</pre>
<p>3.进程的调用情况图(参考proc_ps.log文件)
</p><p><br />        
</p><p><br />
</p><p><br />
/******************************
</p><p>bootchart的工作原理(个人理解,不列入报告中)
</p><p><br />
bootchart主要依靠这么四个文件: header  proc_ps.log  proc_diskstats.log  proc_stat.log(在/var/log/bootchartd.tgz中)
其中header记录了系统的配置信息及用户信息及时间等	proc_ps.log记录了进程的启动信息	proc_diskstats.log记录了磁盘的利用情况	proc_stat.log记录了cpu在启动过程中的使用效率及时间分配情况
</p><p>下面详细分析这四个文件
</p><p>1.proc_ps.log
</p><p>(未完 . . .)
</p>
<div class="printfooter">
<p>取自"<a href="http://dns.cs.hit.edu.cn../../../b/o/o/Bootchart.html">http://dns.cs.hit.edu.cn../../../b/o/o/Bootchart.html</a>"</p>

<p>本页面已经被浏览89次。 This page was last modified 12:27 2006年5月24日 by <a href="../../../x/u/x/User%7EXuxingpeng.html" class="new" title="User:Xuxingpeng">徐兴鹏</a>.  </p>
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'><strong><a href="../../../b/o/o/Bootchart.html" title="Bootchart">编辑本页</a></strong> |
<a href="../../../b/o/o/Talk%7EBootchart.html" class="new" title="Talk:Bootchart">讨论本页</a> |
<a href="../../../b/o/o/Bootchart.html" title="Bootchart">较早版本</a> |
<a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a> |
<a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><br />

<br /><a href="../../../index.html" title="首页">首页</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%85%B3%E4%BA%8E.html" title="Wikipedia:关于">关于Wikipedia</a> | <a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> | <form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form><br /><span id="pagestats">本页面已经被浏览89次。 This page was last modified 12:27 2006年5月24日 by <a href="../../../x/u/x/User%7EXuxingpeng.html" class="new" title="User:Xuxingpeng">徐兴鹏</a>.  </span></td></tr></table>
</div>
</div>

<div id='quickbar'>
<a href='../../../index.html'><img src='../../../../skins/common/images/wiki.jpg' alt='[首页]' /></a>
<hr class='sep' /><a href="../../../index.html">首页</a>
<br /><a href="../../../c/o/m/WIKI-HIT_IBM_CLUB%7ECommunity_Portal_9150.html">社区</a>
<br /><a href="../../../c/u/r/Current_events.html">新闻动态</a>
<br /><a href="../../../r/e/c/Special%7ERecentchanges.html">最近更改</a>
<br /><a href="../../../r/a/n/Special%7ERandom.html">随机页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html">帮助</a>
<br /><a href="../../../s/i/t/WIKI-HIT_IBM_CLUB%7ESite_support.html">Donations</a>
<br />
<hr class='sep' /><strong><a href="../../../b/o/o/Bootchart.html" title="Bootchart">编辑本页</a></strong>
<br /><a href="../../../b/o/o/Talk%7EBootchart.html" class="new" title="Talk:Bootchart">讨论本页</a>
<br /><a href="../../../b/o/o/Bootchart.html" title="Bootchart">较早版本</a>
<br /><a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a>
<br /><a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><hr class='sep' /><a href="../../../s/p/e/Special%7ESpecialpages.html" title="Special:Specialpages">特殊页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A.html" title="Wikipedia:错误报告">错误报告</a>
<br /></div>
<!-- Served by dns.cs.hit.edu.cn in 1351392716.17 secs. -->
</body></html>