<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn" >
<head>
<title>Debian - WIKI-HIT IBM CLUB</title>
<meta name="KEYWORDS" content="首页,ALP,Address,Android,Android Newbie Guide,Android Project Development,Android Research Field,Android Third Party Lib And Tool,BoardGame,CSAPP" />
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../../../../skins/common/wikiprintable.css' />
<script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
<style type='text/css'>
/*/*/ /*<![CDATA[*/
@import "../../../../skins/common/wikistandard.css";
@import "../../../s/t/a/MediaWiki%7EStandard.css.html";
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px; border-right: 1px solid gray; }
#article { margin-left: 152px; margin-right: 4px; }

/*]]>*/ /* */
</style>
</head>

<body bgcolor='#FFFFFF' onload=''>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
<td width='152' rowspan='1'>&nbsp;</td><td class="top" align='left' valign='top'>
<a href="../../../index.html" title="首页">首页</a> |
<a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> |
<a href="../../../d/e/b/Debian.html" title="Debian">编辑本页</a> |
<a href="../../../d/e/b/Debian.html" title="Debian">较早版本</a><p class='subtitle'><a href="../../../d/e/b/Debian.html">可打印版</a> | <a href="../../../g/e/n/WIKI-HIT_IBM_CLUB%7EGeneral_disclaimer.html" title="WIKI-HIT IBM CLUB:General disclaimer">Disclaimers</a></p>
</td>
<td class="top" valign='top' align='right' nowrap='nowrap'>Not logged in
<br /><a href="../../../u/s/e/Special%7EUserlogin.html" title="Special:Userlogin">登录</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html" title="Wikipedia:帮助">帮助</a>
<br /><form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form></td></tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">Debian</h1><p class='subtitle'>Wikipedia，自由的百科全书</p>
<p><a href="../../../d/e/b/Image%7EDebianWiki.png_8ade.html" class="image" title="Image:DebianWiki.png"><img src="../../../../upload/4/4c/DebianWiki.png" alt="Image:DebianWiki.png" width="138" height="126" longdesc="../../../d/e/b/Image%7EDebianWiki.png_8ade.html" /></a>  
</p>
<table id='toc' class='toc'><tr><td><div id='toctitle'><h2>目录</h2></div>
<ul>
<li class='toclevel-1'><a href="#Note.EF.BC.9A"><span class="tocnumber">1</span> <span class="toctext">Note：</span></a></li>
<li class='toclevel-1'><a href="#Debian.E5.8E.86.E5.8F.B2"><span class="tocnumber">2</span> <span class="toctext">Debian历史</span></a></li>
<li class='toclevel-1'><a href="#Kernel.E9.95.9C.E5.83.8F"><span class="tocnumber">3</span> <span class="toctext">Kernel镜像</span></a></li>
<li class='toclevel-1'><a href="#Debian.E8.B5.84.E6.BA.90"><span class="tocnumber">4</span> <span class="toctext">Debian资源</span></a>
<ul>
<li class='toclevel-2'><a href="#USTC"><span class="tocnumber">4.1</span> <span class="toctext">USTC</span></a></li>
<li class='toclevel-2'><a href="#DLUT"><span class="tocnumber">4.2</span> <span class="toctext">DLUT</span></a></li>
<li class='toclevel-2'><a href="#.E5.8F.82.E8.80.83sources.list"><span class="tocnumber">4.3</span> <span class="toctext">参考sources.list</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="#apt_GPG_sign_.E9.97.AE.E9.A2.98"><span class="tocnumber">5</span> <span class="toctext">apt GPG sign 问题</span></a></li>
<li class='toclevel-1'><a href="#Debian.E5.AE.89.E8.A3.85"><span class="tocnumber">6</span> <span class="toctext">Debian安装</span></a>
<ul>
<li class='toclevel-2'><a href="#Debian.E7.A1.AC.E7.9B.98.E5.AE.89.E8.A3.85"><span class="tocnumber">6.1</span> <span class="toctext">Debian硬盘安装</span></a></li>
<li class='toclevel-2'><a href="#HTTP.E5.AE.89.E8.A3.85.E6.B7.BB.E5.8A.A0.E4.BB.A3.E7.90.86"><span class="tocnumber">6.2</span> <span class="toctext">HTTP安装添加代理</span></a></li>
<li class='toclevel-2'><a href="#Base-System.E7.BD.91.E7.BB.9C.E5.AE.89.E8.A3.85Debian"><span class="tocnumber">6.3</span> <span class="toctext">Base-System网络安装Debian</span></a></li>
<li class='toclevel-2'><a href="#.E7.BC.96.E8.AF.91.E6.96.B0.E5.86.85.E6.A0.B8_in_a_Debian_way"><span class="tocnumber">6.4</span> <span class="toctext">编译新内核 in a Debian way</span></a></li>
<li class='toclevel-2'><a href="#.E5.8D.95.E7.94.A8.E6.88.B7.E6.A8.A1.E5.BC.8F"><span class="tocnumber">6.5</span> <span class="toctext">单用户模式</span></a></li>
<li class='toclevel-2'><a href="#.E2.80.9CINIT:_Id_.E2.80.9C1.E2.80.B3_respawning_too_fast:_disabled_for_5_minutes.E2.80.9D_.E9.97.AE.E9.A2.98"><span class="tocnumber">6.6</span> <span class="toctext">“INIT: Id “1″ respawning too fast: disabled for 5 minutes” 问题</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="#Debian.E6.A1.8C.E9.9D.A2"><span class="tocnumber">7</span> <span class="toctext">Debian桌面</span></a>
<ul>
<li class='toclevel-2'><a href="#fcitx.E5.9C.A8QT.E7.A8.8B.E5.BA.8F.E4.B8.AD.E7.9A.84.E8.BE.93.E5.85.A5"><span class="tocnumber">7.1</span> <span class="toctext">fcitx在QT程序中的输入</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="#.E7.AC.94.E8.AE.B0.E6.9C.AC.E4.B8.8A.E7.9A.84_Debian"><span class="tocnumber">8</span> <span class="toctext">笔记本上的 Debian</span></a>
<ul>
<li class='toclevel-2'><a href="#.E6.94.AF.E6.8C.81cpu.E7.9A.84Speed_Step.E6.8A.80.E6.9C.AF"><span class="tocnumber">8.1</span> <span class="toctext">支持cpu的Speed Step技术</span></a></li>
<li class='toclevel-2'><a href="#.E6.94.AF.E6.8C.81.E5.88.87.E6.8D.A2.E7.BD.91.E7.BB.9C.E7.8E.AF.E5.A2.83.E7.9A.84.E8.BD.AF.E4.BB.B6.E5.8C.85_netenv"><span class="tocnumber">8.2</span> <span class="toctext">支持切换网络环境的软件包 netenv</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="#Debian.E4.B8.AD.E6.96.87.E5.8C.96"><span class="tocnumber">9</span> <span class="toctext">Debian中文化</span></a>
<ul>
<li class='toclevel-2'><a href="#zhcon"><span class="tocnumber">9.1</span> <span class="toctext">zhcon</span></a></li>
<li class='toclevel-2'><a href="#.E6.94.AF.E6.8C.81.E4.B8.AD.E6.96.87.E5.88.86.E5.8C.BA"><span class="tocnumber">9.2</span> <span class="toctext">支持中文分区</span></a></li>
<li class='toclevel-2'><a href="#Ubuntu_7.04.E4.B8.8BTex.E7.9A.84.E4.B8.AD.E6.96.87.E9.85.8D.E7.BD.AE"><span class="tocnumber">9.3</span> <span class="toctext">Ubuntu 7.04下Tex的中文配置</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="#Debian.E7.BD.91.E7.BB.9C.E5.92.8C.E6.9C.8D.E5.8A.A1.E5.99.A8.E9.85.8D.E7.BD.AE"><span class="tocnumber">10</span> <span class="toctext">Debian网络和服务器配置</span></a>
<ul>
<li class='toclevel-2'><a href="#.E7.BD.91.E7.BB.9C.E9.85.8D.E7.BD.AE"><span class="tocnumber">10.1</span> <span class="toctext">网络配置</span></a>
<ul>
<li class='toclevel-3'><a href="#.E9.87.8D.E5.90.AF.E7.BD.91.E7.BB.9C.E5.90.8Edefault_gateway.E6.B2.A1.E6.9C.89.E6.94.B9.E8.BF.87.E6.9D.A5"><span class="tocnumber">10.1.1</span> <span class="toctext">重启网络后default gateway没有改过来</span></a></li>
<li class='toclevel-3'><a href="#.E5.8D.95.E7.BD.91.E5.8D.A1.E7.BB.91.E5.AE.9A.E5.8F.8CIP"><span class="tocnumber">10.1.2</span> <span class="toctext">单网卡绑定双IP</span></a></li>
<li class='toclevel-3'><a href="#.E5.8F.8C.E7.BD.91.E5.8D.A1.E7.BB.91.E5.AE.9A.E5.8D.95IP"><span class="tocnumber">10.1.3</span> <span class="toctext">双网卡绑定单IP</span></a></li>
<li class='toclevel-3'><a href="#.E4.BF.AE.E6.94.B9MAC.E5.9C.B0.E5.9D.80"><span class="tocnumber">10.1.4</span> <span class="toctext">修改MAC地址</span></a></li>
</ul>
</li>
<li class='toclevel-2'><a href="#.E6.8F.90.E7.A4.BA"><span class="tocnumber">10.2</span> <span class="toctext">提示</span></a></li>
<li class='toclevel-2'><a href="#Apache_.E6.9C.8D.E5.8A.A1.E5.99.A8"><span class="tocnumber">10.3</span> <span class="toctext">Apache 服务器</span></a>
<ul>
<li class='toclevel-3'><a href="#deb.E5.8C.85.E5.AE.89.E8.A3.85"><span class="tocnumber">10.3.1</span> <span class="toctext">deb包安装</span></a></li>
<li class='toclevel-3'><a href="#.E6.BA.90.E7.A0.81.E5.8C.85.E5.AE.89.E8.A3.85"><span class="tocnumber">10.3.2</span> <span class="toctext">源码包安装</span></a></li>
</ul>
</li>
<li class='toclevel-2'><a href="#VSFTP"><span class="tocnumber">10.4</span> <span class="toctext">VSFTP</span></a></li>
<li class='toclevel-2'><a href="#Mysql"><span class="tocnumber">10.5</span> <span class="toctext">Mysql</span></a>
<ul>
<li class='toclevel-3'><a href="#Can.27t_connect_to_local_MySQL_server_through_socke"><span class="tocnumber">10.5.1</span> <span class="toctext">Can't connect to local MySQL server through socke</span></a></li>
</ul>
</li>
<li class='toclevel-2'><a href="#Postfix.E9.82.AE.E4.BB.B6.E6.9C.8D.E5.8A.A1.E5.99.A8"><span class="tocnumber">10.6</span> <span class="toctext">Postfix邮件服务器</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="#.E6.97.A5.E5.BF.97.E7.AE.A1.E7.90.86"><span class="tocnumber">11</span> <span class="toctext">日志管理</span></a>
<ul>
<li class='toclevel-2'><a href="#Mark"><span class="tocnumber">11.1</span> <span class="toctext">Mark</span></a></li>
<li class='toclevel-2'><a href="#Neighbour_table_overflow"><span class="tocnumber">11.2</span> <span class="toctext">Neighbour table overflow</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="#.E4.BC.98.E5.8C.96Debian"><span class="tocnumber">12</span> <span class="toctext">优化Debian</span></a>
<ul>
<li class='toclevel-2'><a href="#.E7.B2.BE.E5.BD.A9.E7.9A.84Initng"><span class="tocnumber">12.1</span> <span class="toctext">精彩的Initng</span></a></li>
<li class='toclevel-2'><a href="#.E5.8E.BB.E6.8E.89.E5.A4.9A.E4.BD.99.E7.9A.84.E6.9C.8D.E5.8A.A1"><span class="tocnumber">12.2</span> <span class="toctext">去掉多余的服务</span></a></li>
<li class='toclevel-2'><a href="#.E4.BC.98.E5.8C.96.E7.A3.81.E7.9B.98"><span class="tocnumber">12.3</span> <span class="toctext">优化磁盘</span></a></li>
</ul>
</li>
<li class='toclevel-1'><a href="#Debain.E6.96.B0.E7.A7.80Ubuntu.E4.B8.93.E6.A0.8F"><span class="tocnumber">13</span> <span class="toctext">Debain新秀Ubuntu专栏</span></a></li>
</ul>
</td></tr></table>
<p><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "显示"; var tocHideText = "隐藏"; showTocToggle(); } </script>
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Note.EF.BC.9A"></a><h2>Note：</h2>
<p>Ubuntu是Debian的一个分支，下述方法或软件可能不尽相同
</p><p>更详细的参见<a href="http://wiki.cs.hit.edu.cn/debian-reference" class='external text' title="http://wiki.cs.hit.edu.cn/debian-reference" rel="nofollow">Debian参考手册</a>
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Debian.E5.8E.86.E5.8F.B2"></a><h2> Debian历史 </h2>
<p>Debian是一种自由操作系统，全称Debian GNU/Linux。目前是采用Linux作为内核。但是把Debian移植至其他内核的工作也正在进行，最主要的就是Hurd。Hurd是一组在微内核（例如 Mach）上运行的服务器，它们可以提供各种不同的功能。Hurd是由GNU计划所设计的自由软件。
</p><p>这份操作系统中的大部分的基本工具来自于GNU计划；因此把它们命名为GNU/Linux和GNU/Hurd。这些工具同样都是自由的。
</p><p>Debian现在还有基于FreeBSD内核的版本，它现在已经完全可用了，很多人用它来完成日常的工作，这个是 debian的一个子计划，叫做Debian GNU/kFreeBSD，玩游戏，到写更多其他的软件。Debian带来了超过8710个软件包（为了能在您的机器上轻松的安装，这些软件包都已经被编译包装为一种方便的格式,开发人员把它叫做deb包）──这些全部都是自由软件。
</p><p>现在，很多信息学竞赛就是采用Debian作为操作系统。
</p><p>Debian主要分三个版本：稳定版本(stable)、测试版本(testing)、不稳定版本(unstable)。
</p><p>目前的稳定版本为Debian sarge，目前的测试版本为Debian etch，不稳定版本永远为Debian sid。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Kernel.E9.95.9C.E5.83.8F"></a><h2> Kernel镜像 </h2>
<ul><li>教育网镜像
</li></ul>
<pre><a href="http://mirror.dlut.edu.cn/linux/" class='external free' title="http://mirror.dlut.edu.cn/linux/" rel="nofollow">http://mirror.dlut.edu.cn/linux/</a>
</pre>
<ul><li>外网镜像
</li></ul>
<pre><a href="ftp://ftp.hanwater.lkams.kernel.org/pub/linux/" class='external free' title="ftp://ftp.hanwater.lkams.kernel.org/pub/linux/" rel="nofollow">ftp://ftp.hanwater.lkams.kernel.org/pub/linux/</a>
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Debian.E8.B5.84.E6.BA.90"></a><h2> Debian资源 </h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="USTC"></a><h3> USTC </h3>
<p><a href="http://debian.ustc.edu.cn/" class='external free' title="http://debian.ustc.edu.cn/" rel="nofollow">http://debian.ustc.edu.cn/</a>
</p><p>将以下加入你的/etc/apt/sources.list
</p><p>deb <a href="ftp://debian.ustc.edu.cn/debian" class='external free' title="ftp://debian.ustc.edu.cn/debian" rel="nofollow">ftp://debian.ustc.edu.cn/debian</a> stable main non-free contrib <br />
deb-src <a href="ftp://debian.ustc.edu.cn/debian" class='external free' title="ftp://debian.ustc.edu.cn/debian" rel="nofollow">ftp://debian.ustc.edu.cn/debian</a> stable main non-free contrib
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="DLUT"></a><h3>DLUT</h3>
<p><a href="http://mirror.dlut.edu.cn/" class='external free' title="http://mirror.dlut.edu.cn/" rel="nofollow">http://mirror.dlut.edu.cn/</a>
</p>
<pre>我的sources.list
#stable
deb <a href="http://mirror.dlut.edu.cn/debian" class='external free' title="http://mirror.dlut.edu.cn/debian" rel="nofollow">http://mirror.dlut.edu.cn/debian</a> sarge main contrib non-free
deb <a href="http://mirror.dlut.edu.cn/debian-non-US/" class='external free' title="http://mirror.dlut.edu.cn/debian-non-US/" rel="nofollow">http://mirror.dlut.edu.cn/debian-non-US/</a>  sarge/non-US main contrib non-free
deb <a href="http://mirror.dlut.edu.cn/debian-security/" class='external free' title="http://mirror.dlut.edu.cn/debian-security/" rel="nofollow">http://mirror.dlut.edu.cn/debian-security/</a>  sarge/updates main contrib non-free
#testing
deb <a href="http://mirror.dlut.edu.cn/debian" class='external free' title="http://mirror.dlut.edu.cn/debian" rel="nofollow">http://mirror.dlut.edu.cn/debian</a> etch main contrib non-free
deb <a href="http://mirror.dlut.edu.cn/debian-security/" class='external free' title="http://mirror.dlut.edu.cn/debian-security/" rel="nofollow">http://mirror.dlut.edu.cn/debian-security/</a>  etch/updates main contrib non-free
</pre>
<p><br />
</p>
<pre>在/etc/apt/apt.conf中添加：APT::Default-Release "testing"; 可以构建一个混合系统了。
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E5.8F.82.E8.80.83sources.list"></a><h3>参考sources.list</h3>
<pre># Testing
deb <a href="http://mirror.dlut.edu.cn/debian" class='external free' title="http://mirror.dlut.edu.cn/debian" rel="nofollow">http://mirror.dlut.edu.cn/debian</a> etch main contrib non-free
deb-src <a href="http://mirror.dlut.edu.cn/debian" class='external free' title="http://mirror.dlut.edu.cn/debian" rel="nofollow">http://mirror.dlut.edu.cn/debian</a> etch main contrib non-free
deb <a href="http://mirror.dlut.edu.cn/debian-security/" class='external free' title="http://mirror.dlut.edu.cn/debian-security/" rel="nofollow">http://mirror.dlut.edu.cn/debian-security/</a>  etch/updates main contrib non-free
#deb http:/debian.ustc.edu.cn/debian etch main contrib non-free
#deb-src http:/debian.ustc.edu.cn/debian etch main contrib non-free
#deb <a href="http://mirror.dlut.edu.cn/debian" class='external free' title="http://mirror.dlut.edu.cn/debian" rel="nofollow">http://mirror.dlut.edu.cn/debian</a> sid main contrib non-free
#Un-offical
deb <a href="http://debian.ustc.edu.cn/debian-uo" class='external free' title="http://debian.ustc.edu.cn/debian-uo" rel="nofollow">http://debian.ustc.edu.cn/debian-uo</a> sid marillat ustc java jrfonseca firefly
deb-src <a href="http://debian.ustc.edu.cn/debian-uo" class='external free' title="http://debian.ustc.edu.cn/debian-uo" rel="nofollow">http://debian.ustc.edu.cn/debian-uo</a> sid marillat ustc java jrfonseca firefly
</pre>
<pre>deb <a href="http://ftp.sjtu.edu.cn/debian" class='external free' title="http://ftp.sjtu.edu.cn/debian" rel="nofollow">http://ftp.sjtu.edu.cn/debian</a> etch main contrib non-free
deb-src <a href="http://ftp.sjtu.edu.cn/debian" class='external free' title="http://ftp.sjtu.edu.cn/debian" rel="nofollow">http://ftp.sjtu.edu.cn/debian</a> etch main contrib non-free
</pre>
<p><br />
</p>
<pre>deb <a href="http://ubuntu.cn99.com/ubuntu/" class='external free' title="http://ubuntu.cn99.com/ubuntu/" rel="nofollow">http://ubuntu.cn99.com/ubuntu/</a> dapper main restricted universe multiverse
deb <a href="http://ubuntu.cn99.com/ubuntu/" class='external free' title="http://ubuntu.cn99.com/ubuntu/" rel="nofollow">http://ubuntu.cn99.com/ubuntu/</a> dapper-updates main restricted universe multiverse
deb <a href="http://ubuntu.cn99.com/ubuntu/" class='external free' title="http://ubuntu.cn99.com/ubuntu/" rel="nofollow">http://ubuntu.cn99.com/ubuntu/</a> dapper-security main restricted universe multiverse
deb <a href="http://ubuntu.cn99.com/ubuntu/" class='external free' title="http://ubuntu.cn99.com/ubuntu/" rel="nofollow">http://ubuntu.cn99.com/ubuntu/</a> dapper-backports main restricted universe multiverse
deb <a href="http://ubuntu.cn99.com/ubuntu-cn/" class='external free' title="http://ubuntu.cn99.com/ubuntu-cn/" rel="nofollow">http://ubuntu.cn99.com/ubuntu-cn/</a> dapper main restricted universe multiverse
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="apt_GPG_sign_.E9.97.AE.E9.A2.98"></a><h2>apt GPG sign 问题</h2>
<p>我们在apt－get的时候可能遇到GPG error:
W: GPG error: <a href="ftp://ftp.hk.debian.org" class='external free' title="ftp://ftp.hk.debian.org" rel="nofollow">ftp://ftp.hk.debian.org</a> sid Release: ...NO_PUBKEY 010908312D230C5F
这主要因为旧的公钥过期，Debian的reslease采用新的公钥，可以在root解决
wget -O - <a href="http://ftp-master.debian.org/ziyi_key_2006.asc" class='external free' title="http://ftp-master.debian.org/ziyi key 2006.asc" rel="nofollow">http://ftp-master.debian.org/ziyi_key_2006.asc</a> | apt-key add -
到2006年底前都可以正常更新系統了。
</p><p>2007年的公钥：<a href="http://ftp-master.debian.org/archive-key-4.0.asc" class='external free' title="http://ftp-master.debian.org/archive-key-4.0.asc" rel="nofollow">http://ftp-master.debian.org/archive-key-4.0.asc</a>
</p><p><br />
KUbuntu的GPG Key可以在这里获得
</p>
<pre>wget <a href="http://people.ubuntu.com/~jriddell/kubuntu-packages-jriddell-key.gpg" class='external free' title="http://people.ubuntu.com/~jriddell/kubuntu-packages-jriddell-key.gpg" rel="nofollow">http://people.ubuntu.com/~jriddell/kubuntu-packages-jriddell-key.gpg</a>
sudo apt-key add kubuntu-packages-jriddell-key.gpg
</pre>
<p>no public key avaiable 
</p>
<pre> apt-get install debian-archive-keyring
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Debian.E5.AE.89.E8.A3.85"></a><h2> Debian安装 </h2>
<p><a href="http://www.howtoforge.com/perfect_setup_debian_sarge" class='external text' title="http://www.howtoforge.com/perfect setup debian sarge" rel="nofollow">The Perfect Setup - Debian Sarge (3.1)</a>
</p><p><a href="http://bbs.linuxsky.net/viewthread.php?tid=2301" class='external free' title="http://bbs.linuxsky.net/viewthread.php?tid=2301" rel="nofollow">http://bbs.linuxsky.net/viewthread.php?tid=2301</a>
一篇关于Debian安装的简单文章
</p><p>一篇Debian的手册
</p><p><a href="http://www.huihoo.com/debian/quick-reference/quick-reference.zh-cn.html#contents" class='external free' title="http://www.huihoo.com/debian/quick-reference/quick-reference.zh-cn.html#contents" rel="nofollow">http://www.huihoo.com/debian/quick-reference/quick-reference.zh-cn.html#contents</a>
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Debian.E7.A1.AC.E7.9B.98.E5.AE.89.E8.A3.85"></a><h3>Debian硬盘安装</h3>
<ul><li>安装矮人工具箱（带grub的）
</li><li>下载debian-installer
</li></ul>
<pre><a href="http://mirror.dlut.edu.cn/debian/dists/etch/main/installer-i386/current/images/hd-media/2.6/" class='external free' title="http://mirror.dlut.edu.cn/debian/dists/etch/main/installer-i386/current/images/hd-media/2.6/" rel="nofollow">http://mirror.dlut.edu.cn/debian/dists/etch/main/installer-i386/current/images/hd-media/2.6/</a>
</pre>
<p>下载initrd.gz和vmlinuz两个文件，放到C:\boot目录下
</p>
<ul><li>准备Debian的镜像文件，放在任意一个盘符的根目录下面。
</li><li>修改C:\boot\grub\menu.list
</li></ul>
<p>添加
</p>
<pre>title Debian install
kernel (hd0,0)/boot/vmlinuz root=/dev/ram ramdisk_size=20000 devfs=mount,dall
initrd (hd0,0)/boot/initrd.gz
boot
</pre>
<ul><li>重启，选择“我的DOS工具箱”，进入grub；再选择Debian install，直接进入debian的安装
</li><li>注：安装所需文件再46的 “\\173.26.100.46\Tools\Linux\Debian硬盘安装” 目录下面
</li></ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="HTTP.E5.AE.89.E8.A3.85.E6.B7.BB.E5.8A.A0.E4.BB.A3.E7.90.86"></a><h3> HTTP安装添加代理 </h3>
<p>只需在你的/etc/apt/apt.conf中添加：<i>Acquire::http::Proxy "<a href="http://210.46.69.4:3128" class='external free' title="http://210.46.69.4:3128" rel="nofollow">http://210.46.69.4:3128</a>";</i>.
</p><p>注意该句后面有一个分号,不要漏掉!
</p><p>其中210.46.69.4是代理服务器的IP，3128是端口。
</p><p>如果什么时候不想用了，<i>cat /dev/null &gt;/etc/apt/apt.conf</i>即可。、
</p><p>如果使用ubuntu的话，直接export http_proxy=<a href="http://210.46.69.4:3128" class='external free' title="http://210.46.69.4:3128" rel="nofollow">http://210.46.69.4:3128</a> 即可
</p><p>APT::Get::Assume-Yes "true";
</p><p>//如果在安装/卸载过程中出现询问, 应答为 y
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Base-System.E7.BD.91.E7.BB.9C.E5.AE.89.E8.A3.85Debian"></a><h3> Base-System网络安装Debian </h3>
<p>应该说Debian的存在就在于网络，它的网络安装是极其方便的。
</p><p>当安装完Base System之后，当配置好系统后，却发现忘了安装图形界面、或是其他的软件。这时，应该怎么解决么，难不成要再装一次？
</p><p>其实不然。假定你现在想安装gnome的桌面环境，那么依次输入以下命令：
</p><p>apt-get install x-winodw-system<br />
apt-get install gnome<br />
</p><p>这时，就可以通过startx进入gnome，当然，你可以通过下载gdm或是xdm来管理你的桌面环境：
</p><p>apt-get install xdm<br />
apt-get install gdm<br />
/etc/init.d/xdm start 或 /etc/init.d/gdm start
</p><p>当你想从xdm转到gdm来管理桌面环境，只需重新配置xdm和gdm即可：
</p><p>dpkg-reconfigure xdm<br />
dpkg-reconfigure gdm
</p><p>当然，dpkg-reconfigure对重新配置其他软件包同样适用。
</p><p>在这里多说几句，apt-get很智能，能够自动解决软件的依赖关系，例如apt-get install gnome不仅下载了gnome这个软件包，同时还下载gnome依赖的软件包。当然如果发现软件包损坏了，可以卸干净再装：
</p><p>apt-get remove --purge XXX (其中，purge表示删除XXX的配置文件)<br />
apt-get install XXX
</p><p>或者可以试试apt-get install -f来修复
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E7.BC.96.E8.AF.91.E6.96.B0.E5.86.85.E6.A0.B8_in_a_Debian_way"></a><h3> 编译新内核 in a Debian way </h3>
<p>首先先说明一下：Debian支持双内核2.4和2.6，安装系统的内核就相当简单了。<br />
安装2.4内核：apt-get install kernel-image-2.4-686<br />
安装2.6内核：apt-get install kernel-image-2.6-686<br />
当然，这需要根据你系统的体系结构来决定安装哪一个包，但是现在我们使用的计算机大多数都是x386系列的，所以使用686系列的内核即可。
仅此而已。<br />
</p><p>但是如果要自己编译内核就稍稍有点麻烦了。但是没有问题的啦。<br />
</p>
<ol><li>首先下载内核，可以使用Debian现有的内核：
</li></ol>
<p>　apt-get install kernel-source-2.6.8<br />
或者直接到www.kernel.org下down一个最新的kernel。放到/usr/src目录下。
</p>
<ol><li>下载必要工具,有一些工具是必须的,否则无法编译内核
</li></ol>
<p>　apt-get install debhelper modutils kernel-package libncurses5-dev
</p>
<ol><li>以2.6.12.5为例，解压源文件,这样就生成了一个linux-2.6.12.5目录：
</li></ol>
<pre>tar zxvf linux-2.6.12.5.tar.gz
</pre>
<ol><li>为了方便，新建一个链接：
</li></ol>
<pre>ln -s /usr/src/linux-2.6.12.5 linux
</pre>
<ol><li>进入linux目录，如果你不是第一次编译，请先删除以前编译生成的中间文件，这是一个好习惯: 
</li></ol>
<p>　make-kpkg clean
</p>
<ol><li>定制内核,可以使用以前的内核配置文件:
</li></ol>
<p>　cp /boot/config-2.6.12-1-686 .config
当然可以重新配置一个:
　make　menuconfig　/　make xconfig
这里推荐使用menuconfig
</p>
<ol><li>编译内核
</li></ol>
<p>如果配置完毕,现在可以编译内核:
　fakeroot make-kpkg --append_to_version -686 --initrd --revision=marvel.1.1  kernel_image modules_image
不出意外,/usr/src/目录会出现一个deb文件,这就是新编译的内核
</p>
<ol><li>安装内核
</li></ol>
<p>　dpkg -i ../linux2.6.12.5.deb
</p>
<ol><li>卸载内核
</li></ol>
<p>　dpkg -r ../linux2.6.12.5
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E5.8D.95.E7.94.A8.E6.88.B7.E6.A8.A1.E5.BC.8F"></a><h3> 单用户模式 </h3>
<p>糟糕，我忘记密码了！<br />
我的root密码被改了！<br />
我想进入这台机器，但我不知道密码
</p><p>很多时候我们都会不知道超级用户的密码，那么我们是不是进入不了可爱的shell吗？在linux环境下，答案是否定的。
事实上，我们可以进入单用户。由于现在linux版本几乎都是grub，所以这里只讨论grub下的单用户模式。
</p><p>在一般的发布版中，通常的方法是：
</p>
<ol><li> 首先，启动电脑，你当然要在物理上能操作电脑
</li><li> 在grub菜单中，选择要启动的项。按“e”，编辑该项，不用担心，这个修改只影响本次的启动，对以后的启动没有影响。
</li><li> 在该项最后添加“single”即可。但是请注意，如果是debian的话，需要添加的是“single init=/bin/bash”。否则，当进入shell，系统还是会向你要密码的。
</li><li> 修改完后，按enter确认返回grub菜单。再按“b”启动该项。
</li><li> 如果你的grub项有ro，那么你可能无法修改密码——至少没有对/etc/passwd修改权限。所以你需要将该分区变为可写：
</li></ol>
<p>mount -o remout,rw /
</p><p>这样就OK了
</p><p><br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E2.80.9CINIT:_Id_.E2.80.9C1.E2.80.B3_respawning_too_fast:_disabled_for_5_minutes.E2.80.9D_.E9.97.AE.E9.A2.98"></a><h3> “INIT: Id “1″ respawning too fast: disabled for 5 minutes” 问题 </h3>
<p>很多朋友的Debian 系统安装后，在启动时会遇到如下的问题：
</p>
<pre>/bin/sh:line 1:/usr/sbin/termwarp:No such file or directory
/bin/sh:line 1:/usr/sbin/termwarp:
can not execute:No such file or directory
</pre>
<p>同时，会有如下的错误信息显示
</p>
<pre>“INIT: Id “1″ respawning too fast: disabled for 5 minutes”
</pre>
<p>初步判断，将该问题分解为两个部分解决
</p>
<ol><li>“INIT: Id “1″ respawning too fast: disabled for 5 minutes”
</li><li> 无法找到或执行 /usr/sbin/termwrap
</li></ol>
<p>关于”INIT: Id “1″ respawning too fast: disabled for 5 minutes”问题,以下有一篇文章有好的论述,大家可以参考以下:<a href="http://www.linuxmine.com/900.html" class='external free' title="http://www.linuxmine.com/900.html" rel="nofollow">http://www.linuxmine.com/900.html</a>
</p><p>摘录如下:
</p><p>“当使用/etc/inittab里面的某个程序，例如mgetty来接受modem拨入，同时系统又重新启动或者几个拨入都不成功；又或者登录提示数次被取消（例如用ctrl+D），都会出现这种提示。
原因在于，当init通过/etc/inittab来启动某个程序的时候，如果这个程序连续几次被很快地终止，那么在/etc/inittab里面对应的条目就会被禁用并不再启动。正常情况下程序应该在被结束后两分钟后重新启动，这个问题不应该归咎于init的bug。
解决方法是：
首先，很多程序有自己的日志或者把他们的syslog写到/var/log/messages或者这个目录下面类似的日志里面，所以可以查看这些日志来得到错误信息。你也可以手动在shell下面启动这些程序来得到错误信息，但是记得不要改动/etc/inittab里面的项目。你可以以root身份使用 init q命令使得这些无效的命令重新可以使用。”
</p><p>通过查看/etc/inittab可以发现在inittab中有如下语句
</p><p>1:2345:respawn:/usr/sbin/termwrap /usr/sbin/base-config /dev/tty1 2&gt;&amp;1
</p><p>结合上文的分析可以知道，正是因为无法找到/usr/sbin/termwrap 这个文件，导致init respawn出来的进程马上被终止，所以才有
“INIT: Id “1″ respawning too fast: disabled for 5 minutes” 错误的产生。
</p><p>至此，问题可以归结到 /usr/sbin/termwrap 缺失这个问题上。
</p><p>通过查找治疗以及对问题主机的/etc/inittab的分析可以知道，termwrap即terminal wrapper,包含于base-config这个软件包,为一个shell脚本，主要用来侦测用户运行的终端类型，以及使用的语言，进而在debian 系统的第二阶段安装运行base-config时使用。
</p><p><b>解决方案：</b>
</p><p>运行apt-get ，安装base-config软件包
</p><p><br />
<b>问题分析：</b>
</p><p>由于该系统不是我亲自安装，只能根据问题现象做一下推测。从系统的问题情况来看，很有可能是在完成第一阶段安装之后，未运行base-config进行基本系统配置导致/etc/inittab脚本未更新，仍为第一阶段基本系统安装后的脚本。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Debian.E6.A1.8C.E9.9D.A2"></a><h2> Debian桌面 </h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="fcitx.E5.9C.A8QT.E7.A8.8B.E5.BA.8F.E4.B8.AD.E7.9A.84.E8.BE.93.E5.85.A5"></a><h3>fcitx在QT程序中的输入</h3>
<p>换了机器之后，发现qterm输入中文出现了问题。
</p><p>在QT/KDE 程序的输入框中, 可以单击鼠标右键,选择 "Imput Method"-&gt;"xim" , 接下来就可以使用 Ctrl+Space 呼出Fcitx输入法了!
</p><p><br />
还有一个一劳永X的方法:
主要原理就是设置 QT_IM_MODULE=xim 环境变量. 方法:
</p>
<pre>sudo vi /etc/X11/Xsession.d/95xinput
</pre>
<p>交里面的 QT_IM_MODULE=fcitx 改为 QT_IM_MODULE=xim
</p><p>祝你愉快, 最后 /etc/X11/Xsession.d/95xinput 文件看起来像这样( 使用 fcitx 输入法时):
代码:
</p>
<pre>export XMODIFIERS=@im=fcitx
export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=xim
fcitx
</pre>
<p>有时候， export QT_IM_MODULE=xim好使，有时候 export QT_IM_MODULE=fcitx好使。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E7.AC.94.E8.AE.B0.E6.9C.AC.E4.B8.8A.E7.9A.84_Debian"></a><h2> 笔记本上的 Debian </h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E6.94.AF.E6.8C.81cpu.E7.9A.84Speed_Step.E6.8A.80.E6.9C.AF"></a><h3>支持cpu的Speed Step技术</h3>
<p>我的本本是Toshiba Satellite2410：处理器是P4M 1.7G。现在最新的内核2.6.12是支持Intel的SpeedStep技术，但是Debian官方的内核并没有将这个功能编译到内核。所以，我们需要重新编译内核。
方法如下：
</p>
<ul><li>下载内核编译，具体参见编译内核一节，这里注意要将cpu的speed step编译进内核。在Processor type and features 选项中的 Processor family (Pentium-4/Celeron(P4-based)/Pentium-4 M/Xeon) 子项中，选择自己的CPU类型，以及特性。  
</li></ul>
<p>比如我的CPU是P4M的，那就将Pentium-4/Celeron(P4-based)/Pentium-4 M/Xeon 编译进内核，如果是迅驰就选择Pentium M。
</p><p>设置好CPU类型后，就可以设置电源管理了。回到主菜单，进入 Power management options (ACPI, APM) ，在这里你至少要选择一种电源的管理方式：APM或者是ACPI，我是将ACPI编译进内核，而将APM编译成模块。
</p><p>然后我们看CPU Frequency scaling 子目录，将CPU Frequency scaling 编译进内核，然后将能选的都选上，当然不支持你CPU的就不用选了。
</p><p>编译内核。
</p>
<ul><li>用新内核启动，对照debian的<a href="http://packages.debian.org/stable/allpackages" class='external text' title="http://packages.debian.org/stable/allpackages" rel="nofollow">packages</a>，将支持cpu speedstep 的软件包下载安装了，例如：守护进程cpufreqd，cpu工具cpufrequtils，监视cpu的小软件emifreq-applet，gnome的小软件gnome-cpufreq-applet等等。
</li></ul>
<ul><li>我的桌面环境是gnome，在面板中右击“add to panel”，找到CPU Frequecy Scaling Monitor和CpuFreq Monitor就行了。这样就可以调节cpu的速度了。
</li></ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E6.94.AF.E6.8C.81.E5.88.87.E6.8D.A2.E7.BD.91.E7.BB.9C.E7.8E.AF.E5.A2.83.E7.9A.84.E8.BD.AF.E4.BB.B6.E5.8C.85_netenv"></a><h3>支持切换网络环境的软件包 netenv</h3>
<p>使用笔记本的朋友经常要移动办公，因此就伴随着在不同的网络环境中切换的问题。我们可以通过3种方式解决这个问题：
</p>
<ol><li> 手工修改。无疑是最笨最初级的一种方法
</li><li> 通过编写shell脚本,完成网络环境的切换
</li><li> debian(ubuntu)给我们提供了一个方便的工 --- netenv,可以让我们预定义多个的网络环境参数，在系统启动网络设备时，会让用户自己选择适当的网络环境。
</li></ol>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Debian.E4.B8.AD.E6.96.87.E5.8C.96"></a><h2> Debian中文化 </h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="zhcon"></a><h3>zhcon</h3>
<p>不得不承认，zhcon是一个很优秀的汉化shell，第一次见到它，很自然的，我就把它和ucdos作类比了。能让我们在tty下输入中文，支持中文。对于我这种安装英文版的人来说，真的很有用。
</p><p>安装很简单，就是一个zhcon的包。
</p><p>然后直接ctrl+alt+ FnX 到tty下，登陆后直接输入zhcon即可。这下就能输入中文了，真爽。&nbsp;:-)
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E6.94.AF.E6.8C.81.E4.B8.AD.E6.96.87.E5.88.86.E5.8C.BA"></a><h3>支持中文分区</h3>
<p>在2.6之后的内核，文件系统默认都是用了utf-8的编码，而windows的默认编码是gb2312的，原来在redhat中支持中文分区的方法就需要改变了。
</p><p>其实也比较简单：
</p><p>在/etc/fstab中修改：
</p>
<pre>/dev/hda6       /windows/e      vfat    rw,umask=0,user,uid=marvel,utf8   0       0
</pre>
<p>这里/dev/hda6为分区的设备号，/windows/e为挂装的目录，vfat表示fat分区的，最重要的就是选项了，如果以marvel的用户对这个分区有写的权限，则加入uid=marvel，支持utf-8编码，则加入utf8。
</p><p>umount/dev/hda6
mount -a
之后就可以显示中文了。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Ubuntu_7.04.E4.B8.8BTex.E7.9A.84.E4.B8.AD.E6.96.87.E9.85.8D.E7.BD.AE"></a><h3>Ubuntu 7.04下Tex的中文配置</h3>
<p>转载自wxx的blog
</p><p><br />
</p><p>在ubuntu7.04上试验出来的，效果挺好。跟其他的配置不同的是，本配置方法力求简单，易用。所以，步骤很少，也不要下载一大堆的东西。
</p>
<ul><li>apt-get install texlive-base-bin latex-cjk-chinese
</li><li>生成字体Type1字体：
<ol><li> mkdir $HOME/texmf
</li><li> 下载gbkfonts程序，保存到$HOME/texmf下。
</li><li> 复制 simsun.ttf, simli.ttf, simhei.ttf, simkai.ttf 到$HOME/texmf 下。
</li><li> 运行命令 ./gbkfonts simsun.ttf song ./gbkfonts simkai.ttf kai ./gbkfonts simli.ttf li ./gbkfonts simhei.ttf hei
</li></ol>
</li><li>更新系统的搜索路径
<ol><li> sudo mktexlsr
</li><li> 编辑 /etc/texmf/updmap.d/00updmap.cfg， 在文件最后面添加一行Map cjk.map
</li><li> sudo update-updmap
</li><li> updmap
</li></ol>
</li></ul>
<p>差不多就好了。效果和Windows下用LaTeX没什么区别。按照这些步骤配出来的可以直接编译使用GBK编码的文tex档。而且，xdvi，pdflatex，都可以直接用。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Debian.E7.BD.91.E7.BB.9C.E5.92.8C.E6.9C.8D.E5.8A.A1.E5.99.A8.E9.85.8D.E7.BD.AE"></a><h2> Debian网络和服务器配置 </h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E7.BD.91.E7.BB.9C.E9.85.8D.E7.BD.AE"></a><h3>网络配置</h3>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E9.87.8D.E5.90.AF.E7.BD.91.E7.BB.9C.E5.90.8Edefault_gateway.E6.B2.A1.E6.9C.89.E6.94.B9.E8.BF.87.E6.9D.A5"></a><h4>重启网络后default gateway没有改过来</h4>
<p>重启网络后，ifdown再ifup一下就可以了
</p>
<pre>fisherman:/home/wangyao# cp /etc/network/interfaces.46  /etc/network/interfaces
fisherman:/home/wangyao# /etc/init.d/networking restart
Reconfiguring network interfaces...SIOCDELRT: No such process
done.
fisherman:/home/wangyao# /etc/init.d/networking restart
Reconfiguring network interfaces...done.
fisherman:/home/wangyao# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
localnet        *               255.255.255.0   U     0      0        0 eth1
default         173.26.100.99   0.0.0.0         UG    0      0        0 eth1
fisherman:/home/wangyao# ifdown eth1
ifdown: interface eth1 not configured
fisherman:/home/wangyao# ifup eth1
fisherman:/home/wangyao# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
localnet        *               255.255.255.0   U     0      0        0 eth1
default         173.26.100.46   0.0.0.0         UG    0      0        0 eth1
default         173.26.100.99   0.0.0.0         UG    0      0        0 eth1
fisherman:/home/wangyao# ifdown eth1
fisherman:/home/wangyao# ifup eth1
fisherman:/home/wangyao# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
localnet        *               255.255.255.0   U     0      0        0 eth1
default         173.26.100.46   0.0.0.0         UG    0      0        0 eth1
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E5.8D.95.E7.BD.91.E5.8D.A1.E7.BB.91.E5.AE.9A.E5.8F.8CIP"></a><h4>单网卡绑定双IP</h4>
<p>Debian和Redhat、Fedora不太一样，它把interface的信息写到了/etc/network/interfaces文件中了。
以18为例，给一个网卡配双IP如下
</p>
<pre># The primary network interface
auto eth0 eth0:0<br />
iface eth0 inet static<br />
       address 202.118.250.18<br />
       netmask 255.255.255.0<br />
       network 202.118.250.0<br />
       broadcast 202.118.250.255<br />
       gateway 202.118.250.30<br />
       # dns-* options are implemented by the resolvconf package, if installed<br />
       dns-nameservers 202.118.250.101<br />
iface eth0:0 inet static<br />
       address 173.26.100.102<br />
       netmask 255.255.255.0<br />
       network 173.26.100.0<br />
       broadcast 173.26.100.255<br />
       gateway 173.26.100.46
</pre>
<p>重起服务：/etc/init.d/network restart
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E5.8F.8C.E7.BD.91.E5.8D.A1.E7.BB.91.E5.AE.9A.E5.8D.95IP"></a><h4>双网卡绑定单IP</h4>
<ul><li>先把双网卡的驱动安装上去，不要设置网卡的IP
</li></ul>
<pre>modprobe bonding
ifconfig eth0 down
ifconfig eth1 down(如果你的两块网卡本身就是DOWN的就不需要这条命令）
ifconfig bond0 192.168.0.1(设置你双网卡的绑定IP地址）
ifenslave bond0 eht0
ifenslave bond0 eht1
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E4.BF.AE.E6.94.B9MAC.E5.9C.B0.E5.9D.80"></a><h4>修改MAC地址</h4>
<p>以MAC地址11:22:33:44:55:66 为例
debian的是在/etc/network/interface中对应网卡处加入
hwaddress ether 11:22:33:44:55:66 
</p><p>或者在/etc/init.d/networking中加入一句:
/sbin/ifconfig eth0 hw ether 11:22:33:44:55:66,
重起服务：/etc/init.d/network restart
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E6.8F.90.E7.A4.BA"></a><h3>提示</h3>
<p>在Debian下安装服务器永远有两种选择: 源码安装和deb安装,用Deb安装的话好处就是方便,而相比而言源码安装就需要一些时间和精力了,但是源码安装毕竟有很高的定制性,有一个源码的tar.gz文件，你就能拥有所有的功能。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Apache_.E6.9C.8D.E5.8A.A1.E5.99.A8"></a><h3>Apache 服务器</h3>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="deb.E5.8C.85.E5.AE.89.E8.A3.85"></a><h4>deb包安装</h4>
<pre>apt-get install apache
apt-get install apache2
</pre>
<p>然后根据自己的服务器要求，在安装相应的组件，方法如上。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E6.BA.90.E7.A0.81.E5.8C.85.E5.AE.89.E8.A3.85"></a><h4>源码包安装</h4>
<p>下载源码包文件：<a href="http://httpd.apache.org/download.cgi" class='external free' title="http://httpd.apache.org/download.cgi" rel="nofollow">http://httpd.apache.org/download.cgi</a>
</p><p>解压文件：
tar zxvf httpd-2.0.54.tar.gz
</p><p>进入文件夹httpd-2.0.54，检查配置：./configure
</p><p>编译：make
</p><p>安装：make install
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="VSFTP"></a><h3>VSFTP</h3>
<p>VSFTPD（Very Safe FTP Deamon）是Redhat的默认ftp服务器，所以我也就使用它了。
不言而喻，安装就是一个apt-get install vsftpd，
但是启动之后有一个问题：
</p>
<pre>220 (vsFTPd 2.0.3)
Name (173.26.100.148:marvel):
331 Please specify the password.
Password:
230 Login successful.
ftp&gt; ls
215 UNIX Type: L8
500 OOPS: vsf_sysutil_recv_peek
</pre>
<p>这个问题从来没有遇到过，后来搜了一下才弄懂，少加了一个模块：
</p>
<pre>modprobe capability
</pre>
<p>这下就好了。希望对大家有帮助&nbsp;:-)
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Mysql"></a><h3>Mysql</h3>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Can.27t_connect_to_local_MySQL_server_through_socke"></a><h4>Can't connect to local MySQL server through socke</h4>
<p>启动mysql错误
</p><p>我新安装mysql什么也没有设置也没有设置过密码我启动它是显示
</p>
<pre>[root@ann bin]# ./mysqladmin -u root -p password '123456'
Enter password:
./mysqladmin: connect to server at 'localhost' failed
error: 'Can't connect to local MySQL server through socket '/tmp/mysql.sock' (111)'
Check that mysqld is running and that the socket: '/tmp/mysql.sock' exists!
[root@ann bin]#
</pre>
<p>请问是什么问题？？
</p>
<pre>答：你那样的提示说明你的mysqld还没有正常启动,先启动它.
它的脚本可能在/etc/inint.d,这样启动它/etc/inint.d/mysqld start
启动后你用这个命令登录
mysql -u root -p
如果你用默认密码无法登录,很正常,你需要重新设置root密码.
用--skip-grant-tables选项启动mysql就可以了,然后修改root密码.
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Postfix.E9.82.AE.E4.BB.B6.E6.9C.8D.E5.8A.A1.E5.99.A8"></a><h3>Postfix邮件服务器</h3>
<p>Postfix的邮件服务器配置比较简单，直接使用apt-get安装即可。需要注意的是，缺省的没有加SMTP认证，如果需要加SMTP认证，请参考如下的文章.
</p><p><a href="../../../p/o/s/Postfix%E7%9A%84SMTP%E8%AE%A4%E8%AF%81_58f9.html" title="Postfix的SMTP认证">Postfix的SMTP认证</a>(转载自台湾论坛，因此为big5)
</p><p>该文章中的最后测试，我没有通过，直接使用mail client设置发送的smtp服务器做测试即可。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E6.97.A5.E5.BF.97.E7.AE.A1.E7.90.86"></a><h2> 日志管理 </h2>
<p>/var/log是系统存放日志的地方，最重要的是message文件。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Mark"></a><h3> Mark </h3>
<p>大家查看/var/log/message，可能会发现经常出现下列的信息：
</p>
<pre>  6355 Jan 20 14:51:01 mvision -- MARK --
  6356 Jan 20 15:11:01 mvision -- MARK --
  6357 Jan 20 15:31:01 mvision -- MARK --
</pre>
<p>有趣的是每条信息之间的间隔是20分钟，这是怎么回事呢？
</p><p>原来，这条Mark的信息是系统有意为之的。其一是确定远方主机是否存活，其二是供系统管理员分析系统停机的时间。
</p><p>但是问题是这么多的Mark让人看起来实在是不爽，特别是分析其他问题时候会造成效率降低。那么如何将其降低呢？
</p><p>事实上，在Debian服务器上你可以通过编辑/etc/init.d/sysklogd文件根据你的意愿设置这个间隔时间。把间隔时间设置为60分钟的指令是:
</p><p>　　SYSLOGD=“-m 60”
</p><p>　　然后重新启动系统记录守护程序:
</p><p>　　# /etc/init.d/sysklogd restart
</p><p>　　在Red Hat和同一类系的系统上，编辑/etc/sysconfig/syslog文件使用如下指令:
</p><p>　　SYSLOGD_OPTIONS=“-m 60”
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Neighbour_table_overflow"></a><h3>Neighbour table overflow</h3>
<p>最近实验室网络经常出现丢包、掉线的情况，查看系统日志发现：
</p>
<pre>   Sep 21 06:37:48 localhost kernel: printk: 161 messages suppressed.
   Sep 21 06:37:48 localhost kernel: Neighbour table overflow.
   Sep 21 06:37:53 localhost kernel: printk: 187 messages suppressed.
   Sep 21 06:37:53 localhost kernel: Neighbour table overflow.
   Sep 21 06:37:58 localhost kernel: printk: 188 messages suppressed.
   Sep 21 06:37:58 localhost kernel: Neighbour table overflow.
   Sep 21 06:38:03 localhost kernel: printk: 64 messages suppressed.
   Sep 21 06:38:03 localhost kernel: Neighbour table overflow.
   Sep 21 06:38:09 localhost kernel: printk: 32 messages suppressed.
</pre>
<p>解决方案:
</p>
<pre>   echo 20480&gt; /proc/sys/net/ipv4/neigh/default/gc_thresh1
   echo 40960&gt; /proc/sys/net/ipv4/neigh/default/gc_thresh2
   echo 81920 &gt; /proc/sys/net/ipv4/neigh/default/gc_thresh3 
</pre>
<p>如果ok,就修改/etc/sysctl.conf
</p>
<pre>   net.ipv4.neigh.default.gc_thresh3 = 81920
   net.ipv4.neigh.default.gc_thresh2 = 40960
   net.ipv4.neigh.default.gc_thresh1 = 20480
</pre>
<p>注意:
</p>
<pre>我改的数值有点大.
原本 gc_thresh1=128，gc_thresh2=258，gc_thresh3=512
neighbor table的最大值是100000。
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E4.BC.98.E5.8C.96Debian"></a><h2>优化Debian</h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E7.B2.BE.E5.BD.A9.E7.9A.84Initng"></a><h3>精彩的Initng</h3>
<ul><li>安装使用
</li></ul>
<p>Initng，一个超棒的启动提速软件。首页己大字标题"Initng: a sysvinit replacement"，也就是说它是用来代替传统的sysvinit启动模式。
详见<a href="http://www.initng.org/" class='external free' title="http://www.initng.org/" rel="nofollow">http://www.initng.org/</a>
传统的sysvinit启动模式最大问题是硬件初始化时逐一检测(probe)，一个成功后才往下一个检测，浪费时间。Initng的模式就是将要硬件初始化并行进行，从而达到加快启动的目标.我在俱乐部的机器上使用了以后启动时间#为9400ms左右.
</p><p>Initng最新版是0.6.7。对于Debian可以使用预先编译好的deb包。下载地址
</p>
<pre><a href="http://alioth.debian.org/projects/pkg-initng/" class='external free' title="http://alioth.debian.org/projects/pkg-initng/" rel="nofollow">http://alioth.debian.org/projects/pkg-initng/</a>
</pre>
<p>可版本只到0.6.0-1（i386）。下载initng_0.6.0-1_i386.deb和initng-ifiles_0.0.2.2-2_all.deb两个包，首先安装initng-ifiles再安装initng。这时应该会在/boot/grub/menu.list的内核启动选项里作如下修改:
</p>
<pre> #这个针对grub
 title           Debian GNU/Linux, kernel 2.6.15-1-686-smp initng
 root            (hd0,7)
 kernel          /boot/vmlinuz-2.6.15-1-686-smp root=/dev/hda8 ro quiet vga=792 init=/sbin/initng
 initrd          /boot/initrd.img-2.6.15-1-686-smp
 savedefault
 boot
</pre>
<ul><li>已知的问题
</li></ul>
<p>根据我在俱乐部IBM机器上的试验结果,只有内核版本号为2.6.15-1-686-smp(apt-get来的)的成功了.至于不支持超线程处理器的内核没有测试.此外在启动过成中,会提示DAEMON_FAIL_STARTING,这时应为相应的服务已经删除了,可启动脚本并没有删除.
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E5.8E.BB.E6.8E.89.E5.A4.9A.E4.BD.99.E7.9A.84.E6.9C.8D.E5.8A.A1"></a><h3>去掉多余的服务</h3>
<p>我发现Debian在启动时会启动AppleTalk，花费很长的时间，干脆删除吧！用root登陆,运行apt-get remove netatalk删除AppleTalk。在网上有人说MTA也很慢，也删了吧apt-get remove exim4。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name=".E4.BC.98.E5.8C.96.E7.A3.81.E7.9B.98"></a><h3>优化磁盘</h3>
<pre> #apt-get -y install hdparm
 #/sbin/hdparm -c3 -u1 -d1 /dev/hda
 #/sbin/hdparm -k1 /dev/hda
</pre>
<p><br />
用hdparm 加上个参数。
</p>
<pre> #/sbin/hdparm -c3 -u1 -d1 -X6x /dev/hda
</pre>
<p>X参数是打开硬盘DMA模式，现在的硬盘和主板都能支持这个了。具体的参数是 ATA66=68 ， ATA100=69 ， ATA33=66 。Suggest to add the -a option, e.g. -a1024, this increase the read ahead buffer and enhance the overall performance.
</p>
<pre> #/sbin/hdparm -c3 -u1 -d1 -X69 -a1024 /dev/hda
</pre>
<p>做一个benchmark吧，看看不同 
</p>
<pre>  #/sbin/hdparm -tT /dev/hda 
</pre>
<p>使用预链接加速程序启动速度
</p>
<pre> #apt-get -y install prelink
 #/usr/sbin/prelink -all --conserve-memory
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/e/b/Debian.html" title="Debian">编辑</a>]</div><a name="Debain.E6.96.B0.E7.A7.80Ubuntu.E4.B8.93.E6.A0.8F"></a><h2> Debain新秀Ubuntu专栏 </h2>
<p>关于Ubuntu的内核编译方法
</p><p>内核编译与Debain的基本上一样。但是，可能对Debain的方式不太熟悉，可以采用像RedHat一样的内核编译方式。
在我编译的时候遇到了一个initrd.img的问题。mkinitrd可以生成initrd.img，但是这个命令是RedHat专有的。其它Linux发行版或许有相应的命令。
mkinitrd的有无与一些发行版有关。
</p><p>在Ubuntu下进行编译内核需要一些包的支持(这可以参照Ubuntu的官方文档)：
当然，首先得装上编译工具，默认是没有的，装上就是了 
建议安装libncurese-dev和libqt3-dev包，第一个是menuconfig所需要的，第二个用于xconfig，安装 他们中的一个是很小的
</p><p>对于2.6.的内核安装步骤，
</p>
<pre>make menuconfig
make 
make modules_install
make install
</pre>
<p>2.6.的内核安装，make install应该会自动的检查系统中的引导程序，将其加入到lilo或者是grub中。但是ubuntu5.10没有自动的加入。所以需要手工加入menu.list。
</p><p>initrd.img的解决方案（<b>推荐使用方案一</b>）：
</p><p>方案一、安照Ubuntu官方网站的方法，进行，下载fakeroot和kernel-package
</p>
<pre>fakeroot make-kpkg --append-to-version=.181004 kernel_image --initrd binary
dpkg -i kernel-image-x.y.z.yy.mm.dd_10.00.Custom_i386.deb
</pre>
<p>方案二、下载initrd-tools，安装的mkinitrd的包，   <a href="http://packages.debian.org/unstable/utils/initrd-tools" class='external free' title="http://packages.debian.org/unstable/utils/initrd-tools" rel="nofollow">http://packages.debian.org/unstable/utils/initrd-tools</a>
Ubuntu下还缺少一个库，cramfsprogs,下载安装这个库。
</p>
<pre>mkinitrd -o initrd.img-2.6.15 /lib/modules/2.6.15/
</pre>
<p>或者是：
</p>
<pre>mkinitrd -o initrd.img-2.6.15 2.6.15
</pre>
<p>接着，修改一下grub的menu.list文件就可以了
</p><p>另外，还有一种方法，需要内核的支持。在编译内核的时候，选上
File system--&gt;Pseudo filesystems--&gt;Automatically munt at boot(2.4内核上有，但是2.6内核上没有这个选项)
这样就可以不用initrd.img文件了。
</p>
<div class="printfooter">
<p>取自"<a href="http://dns.cs.hit.edu.cn../../../d/e/b/Debian.html">http://dns.cs.hit.edu.cn../../../d/e/b/Debian.html</a>"</p>

<p>本页面已经被浏览1,537次。 This page was last modified 02:40 2007年12月14日 by <a href="../../../l/i/u/User%7ELiuwenmao.html" class="new" title="User:Liuwenmao">刘文懋</a>. Based on work by <a href="../../../w/a/n/User%7EWangyao.html" title="User:Wangyao">王耀</a>, <a href="../../../%E5%90%B4/%E6%99%8B/_/User%7E%E5%90%B4%E6%99%8B.html" title="User:吴晋">吴晋</a>, <a href="../../../l/o/o/User%7ELookou.html" title="User:Lookou">林晓鑫</a>, <a href="../../../x/i/o/User%7EXiongfei.html" class="new" title="User:Xiongfei">xiongfei</a> 和 <a href="../../../l/e/a/User%7ELeagle.html" title="User:Leagle">梁英</a> 和 匿名用户. </p>
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'><strong><a href="../../../d/e/b/Debian.html" title="Debian">编辑本页</a></strong> |
<a href="../../../d/e/b/Talk%7EDebian.html" title="Talk:Debian">讨论本页</a> |
<a href="../../../d/e/b/Debian.html" title="Debian">较早版本</a> |
<a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a> |
<a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><br />

<br /><a href="../../../index.html" title="首页">首页</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%85%B3%E4%BA%8E.html" title="Wikipedia:关于">关于Wikipedia</a> | <a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> | <form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form><br /><span id="pagestats">本页面已经被浏览1,537次。 This page was last modified 02:40 2007年12月14日 by <a href="../../../l/i/u/User%7ELiuwenmao.html" class="new" title="User:Liuwenmao">刘文懋</a>. Based on work by <a href="../../../w/a/n/User%7EWangyao.html" title="User:Wangyao">王耀</a>, <a href="../../../%E5%90%B4/%E6%99%8B/_/User%7E%E5%90%B4%E6%99%8B.html" title="User:吴晋">吴晋</a>, <a href="../../../l/o/o/User%7ELookou.html" title="User:Lookou">林晓鑫</a>, <a href="../../../x/i/o/User%7EXiongfei.html" class="new" title="User:Xiongfei">xiongfei</a> 和 <a href="../../../l/e/a/User%7ELeagle.html" title="User:Leagle">梁英</a> 和 匿名用户. </span></td></tr></table>
</div>
</div>

<div id='quickbar'>
<a href='../../../index.html'><img src='../../../../skins/common/images/wiki.jpg' alt='[首页]' /></a>
<hr class='sep' /><a href="../../../index.html">首页</a>
<br /><a href="../../../c/o/m/WIKI-HIT_IBM_CLUB%7ECommunity_Portal_9150.html">社区</a>
<br /><a href="../../../c/u/r/Current_events.html">新闻动态</a>
<br /><a href="../../../r/e/c/Special%7ERecentchanges.html">最近更改</a>
<br /><a href="../../../r/a/n/Special%7ERandom.html">随机页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html">帮助</a>
<br /><a href="../../../s/i/t/WIKI-HIT_IBM_CLUB%7ESite_support.html">Donations</a>
<br />
<hr class='sep' /><strong><a href="../../../d/e/b/Debian.html" title="Debian">编辑本页</a></strong>
<br /><a href="../../../d/e/b/Talk%7EDebian.html" title="Talk:Debian">讨论本页</a>
<br /><a href="../../../d/e/b/Debian.html" title="Debian">较早版本</a>
<br /><a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a>
<br /><a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><hr class='sep' /><a href="../../../s/p/e/Special%7ESpecialpages.html" title="Special:Specialpages">特殊页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A.html" title="Wikipedia:错误报告">错误报告</a>
<br /></div>
<!-- Served by dns.cs.hit.edu.cn in 1351392597.99 secs. -->
</body></html>