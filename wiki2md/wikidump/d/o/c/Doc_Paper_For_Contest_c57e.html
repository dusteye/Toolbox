<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn" >
<head>
<title>Doc Paper For Contest - WIKI-HIT IBM CLUB</title>
<meta name="KEYWORDS" content="首页,ALP,Address,Android,Android Newbie Guide,Android Project Development,Android Research Field,Android Third Party Lib And Tool,BoardGame,CSAPP" />
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../../../../skins/common/wikiprintable.css' />
<script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
<style type='text/css'>
/*/*/ /*<![CDATA[*/
@import "../../../../skins/common/wikistandard.css";
@import "../../../s/t/a/MediaWiki%7EStandard.css.html";
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px; border-right: 1px solid gray; }
#article { margin-left: 152px; margin-right: 4px; }

/*]]>*/ /* */
</style>
</head>

<body bgcolor='#FFFFFF' onload=''>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
<td width='152' rowspan='1'>&nbsp;</td><td class="top" align='left' valign='top'>
<a href="../../../index.html" title="首页">首页</a> |
<a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> |
<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑本页</a> |
<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">较早版本</a><p class='subtitle'><a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html">可打印版</a> | <a href="../../../g/e/n/WIKI-HIT_IBM_CLUB%7EGeneral_disclaimer.html" title="WIKI-HIT IBM CLUB:General disclaimer">Disclaimers</a></p>
</td>
<td class="top" valign='top' align='right' nowrap='nowrap'>Not logged in
<br /><a href="../../../u/s/e/Special%7EUserlogin.html" title="Special:Userlogin">登录</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html" title="Wikipedia:帮助">帮助</a>
<br /><form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form></td></tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">Doc Paper For Contest</h1><p class='subtitle'>Wikipedia，自由的百科全书</p>
<table id='toc' class='toc'><tr><td><div id='toctitle'><h2>目录</h2></div>
<ul>
<li class='toclevel-1'><a href="#.E7.AC.AC.E4.B8.89.E7.AB.A0_.E7.A1.AC.E4.BB.B6.E7.B3.BB.E7.BB.9F.E8.AE.BE.E8.AE.A1.E4.B8.8E.E5.88.86.E6.9E.90"><span class="tocnumber">1</span> <span class="toctext">第三章 硬件系统设计与分析</span></a>
<ul>
<li class='toclevel-2'><a href="#.E7.A1.AC.E4.BB.B6.E7.B3.BB.E7.BB.9F.E8.AE.BE.E8.AE.A1.E7.9B.AE.E6.A0.87"><span class="tocnumber">1.1</span> <span class="toctext">硬件系统设计目标</span></a></li>
<li class='toclevel-2'><a href="#USB-CAN.E9.80.82.E9.85.8D.E5.99.A8"><span class="tocnumber">1.2</span> <span class="toctext">USB-CAN适配器</span></a>
<ul>
<li class='toclevel-3'><a href="#.E5.8E.9F.E7.90.86"><span class="tocnumber">1.2.1</span> <span class="toctext">原理</span></a></li>
<li class='toclevel-3'><a href="#.E7.A1.AC.E4.BB.B6.E8.AE.BE.E8.AE.A1"><span class="tocnumber">1.2.2</span> <span class="toctext">硬件设计</span></a></li>
</ul>
</li>
<li class='toclevel-2'><a href="#.E7.A1.AC.E4.BB.B6.E6.89.A9.E5.B1.95.E6.9D.BF"><span class="tocnumber">1.3</span> <span class="toctext">硬件扩展板</span></a>
<ul>
<li class='toclevel-3'><a href="#.E9.81.A5.E6.8E.A7.E5.99.A8"><span class="tocnumber">1.3.1</span> <span class="toctext">遥控器</span></a></li>
<li class='toclevel-3'><a href="#.E9.9F.B3.E9.A2.91.E6.97.A0.E7.BA.BF.E5.8F.91.E5.B0.84"><span class="tocnumber">1.3.2</span> <span class="toctext">音频无线发射</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr></table>
<p><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "显示"; var tocHideText = "隐藏"; showTocToggle(); } </script>
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑</a>]</div><a name=".E7.AC.AC.E4.B8.89.E7.AB.A0_.E7.A1.AC.E4.BB.B6.E7.B3.BB.E7.BB.9F.E8.AE.BE.E8.AE.A1.E4.B8.8E.E5.88.86.E6.9E.90"></a><h2>第三章 硬件系统设计与分析 </h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑</a>]</div><a name=".E7.A1.AC.E4.BB.B6.E7.B3.BB.E7.BB.9F.E8.AE.BE.E8.AE.A1.E7.9B.AE.E6.A0.87"></a><h3>硬件系统设计目标</h3>
<p>未来的车载电子系统应是向着信息全面、使用方便及安全可靠的趋势发展。EnterSphere为ECX开发板打造了CAN信息接口，满足车况信息的全面性。同时为了丰富人机交互控制模式、提高系统的易用性、满足车内环境的无线需求，EnterSphere外扩了遥控器和射频发射模块。
</p><p>所以，硬件部分需要以下设备：USB-CAN适配器、遥控器、音频无线发射 GPS接收机。
</p><p>基于设计及应用方面的考虑，我们将遥控器、音频无线发射部分制作到一块开发板上，通过串口、音频接口与开发板相连，将CAN适配器做成USB接口的USB-CAN适配器，而GPS接收机采用成品的连接方式，通过一个串口与开发板相连。采用这种方式的好处是：
</p><p>升级成本低：方便的单独升级各个部件。遥控器、音频、GPS部分与USB-CAN适配卡在功能上完全不相关，面对未来可能对某一部分升级的需要，可单独更换，不需要一次性更换全部设备。
</p><p>制作成本低：USB-CAN适配卡相对其它硬件部分对硬件的功能、稳定性要求较高，因其自身传输的速率较大，所以采用速度快、功耗低的电子元件，并全部采用贴片式元件来降低功耗，减小体积，提高防震、抗干扰的能力；而对于数据量小的部分采用DIP封装的元件在满足应用的前提下尽量降低成本。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑</a>]</div><a name="USB-CAN.E9.80.82.E9.85.8D.E5.99.A8"></a><h3>USB-CAN适配器</h3>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑</a>]</div><a name=".E5.8E.9F.E7.90.86"></a><h4> 原理 </h4>
<p><a href="../../../%E8%BD%A6/%E4%B8%8A/m/Image%7E%E8%BD%A6%E4%B8%8AMCU.png_ec1d.html" class="image" title="Image:车上MCU.png"><img src="../../../../upload/e/e9/%E8%BD%A6%E4%B8%8AMCU.png" alt="Image:车上MCU.png" width="1108" height="1579" longdesc="../../../%E8%BD%A6/%E4%B8%8A/m/Image%7E%E8%BD%A6%E4%B8%8AMCU.png_ec1d.html" /></a>
上图车上各个ECU单元通过CAN总线进行通信，由于CAN不像LIN总线是主/从总线，只能有一个发送单元，它是多主的总线，只要总线空闲，任何单元都可以开始发送报文，同时支持多点传送，任意数目的节点对同一条报文都可以接收并同时对此作出反应。现车上都留有CAN的汽车诊断接口，通过该接口，我们可以读取车上的CAN信息,如发动机的转速、温度、油液压力等信息
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑</a>]</div><a name=".E7.A1.AC.E4.BB.B6.E8.AE.BE.E8.AE.A1"></a><h4> 硬件设计 </h4>
<p>CAN-USB适配器原理图
(图太大 暂缺到时再补上)
</p><p>1 CAN-USB适配器
</p>
<pre>1.1 微处理器PIC18F458
</pre>
<p>通过PIC18F458片内CAN控制器，以2.0B协议格式发收CAN数据。对PD1USBD12进行编程控制及数据的传输。
</p>
<pre>1.2 CAN总线驱动器TJA1040
</pre>
<p>CAN总线驱动器提供了CAN控制器与物理总线之间的接口, 是影响系统网络性能的关键因素之一。由于与车上CAN总线连接，对总线驱动器的速度、信号质量要求更高，选用了高性能的总线驱动器TJA1040。TJA1040最高速率可达1Mbps，
同时优化了输出信号CANH和CANL这间的耦合，大大降低了信号的电磁辐射(EMI)。
</p>
<pre>1.3 USB接口器件
</pre>
<p>带并行总线的USB接口器件PC1USBD12与微处理器PIC18F458实现高速并行接口。PD1USBD12以USB1.1规范与开发板通信
</p><p>外围硬件控制板原理图
(图太大 暂缺到时再补上)
</p><p><br />
<b>驱动编写</b>：
</p><p>CAN-USB适配器的驱动在kernel2.6.16内核的usb驱动骨架程序的基础基础上进行了一定的更改，将厂商ID和设备ID更改为CAN-USB适配器的对应值，并将设备虚拟成一个设备文件进行操作。
</p><p><b>CAN模拟节点设计：</b>
</p><p>CAN模拟节点原理图
(图太大 暂缺到时再补上)
</p><p><b>硬件设计：</b>
</p>
<pre>1 微处理器89S51   
</pre>
<p>微处理器控制CAN控制器，对其进行编程控制，同时模拟车上的信息，发送到总线，也可以接收信息，并模拟相应的处理动作。
</p>
<pre>2 CAN控制器SJA1000
</pre>
<p>CAN控制器是以一块可编程芯片上的逻辑电路的组和来实现CAN规划中数据链路层和物理层的协议，同时对外它提供了与微处理器的物理线路的接口，通过对它的编程，微处理器可以设置它的工作方式，控制它的工作状态，进行数据的发送和接收，把应用层建立在它的基础上，由于现有的CAN应用层各个汽车厂商并不统一，同时在本系统中，由于控制、数据简单，微处理器能力有限，没必要用到应用层。
</p>
<pre>3 CAN总线驱动器82C250
</pre>
<p>CAN总线驱动器提供了CAN控制器与物理总线之间的接口，是影响系统网络性能的关键因素之一。由于本系统是低速的，使用非屏蔽的双绞线作为总线，同时有射频发射模块。为了降低射频干扰，应限制上升和下降的斜率。通过引脚8（Rs）至地连接的电阻进行控制。另外，为进一步增强节点的抗干扰能力，SJA1000的TX0和RX0并不是与82C250的TXD和RXD相连，而是通过高速光电耦6N137后与82C250相连，同时光电耦部分采用两个隔离的电源V1和V2，这样就很好的实现了总线上各CAN节点的电气隔离。
</p><p><b>软件设计：</b>
</p><p>软件流程图
</p><p><a href="../../../c/a/n/Image%7ECAN%E6%B5%81%E7%A8%8B%E5%9B%BE.png_bd2e.html" class="image" title="Image:CAN流程图.png"><img src="../../../../upload/e/ef/CAN%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="Image:CAN流程图.png" width="700" height="989" longdesc="../../../c/a/n/Image%7ECAN%E6%B5%81%E7%A8%8B%E5%9B%BE.png_bd2e.html" /></a>
</p><p>1)SJA1000初始化
</p><p>初始化工作主要包括工作方式的设置、接收滤波方式的设置、接收屏蔽寄存器（AMR）和接收代码寄存器（ACR）的设置、波特率参数设置和中断允许寄存器（IER）的设置等。
</p><p>2)接收子程序
</p><p>接收子程序负责节点报文的接收及其他情况的处理
</p><p>3)发送子程序
</p><p>发送子程序负责模拟节点模拟信息的发送
</p><p>具体代码参见附录二
</p><p><br />
</p>
<ul><li>指标
</li></ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑</a>]</div><a name=".E7.A1.AC.E4.BB.B6.E6.89.A9.E5.B1.95.E6.9D.BF"></a><h3>硬件扩展板</h3>
<ul><li>简介
</li></ul>
<p>硬件扩展板是弥补由车上狭小空间带来的对鼠标、键盘、音频线的限制而将遥控器、音频无线发射、温控风扇引入，并通过一块单片机统一控制。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑</a>]</div><a name=".E9.81.A5.E6.8E.A7.E5.99.A8"></a><h4>遥控器</h4>
<p>通过遥控器编码芯片DT9122D来接收用户的指令，并将指令通过单片机发送到开发板。
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑</a>]</div><a name=".E9.9F.B3.E9.A2.91.E6.97.A0.E7.BA.BF.E5.8F.91.E5.B0.84"></a><h4>音频无线发射</h4>
<p>音频无线发射部分采用无线发射模块MEC1417F将音频信号转换为调频范围内的立体声调频信号发射出去。
</p>
<div class="printfooter">
<p>取自"<a href="http://dns.cs.hit.edu.cn../../../d/o/c/Doc_Paper_For_Contest_c57e.html">http://dns.cs.hit.edu.cn../../../d/o/c/Doc_Paper_For_Contest_c57e.html</a>"</p>

<p>本页面已经被浏览2,142次。 This page was last modified 23:22 2006年6月29日 by <a href="../../../s/h/e/User%7EShenjinbo.html" class="new" title="User:Shenjinbo">沈锦波</a>. Based on work by <a href="../../../%E5%91%A8/%E8%93%9D/%E7%8F%BA/User%7E%E5%91%A8%E8%93%9D%E7%8F%BA.html" class="new" title="User:周蓝珺">周蓝珺</a>, <a href="../../../%E5%90%B4/%E6%99%8B/_/User%7E%E5%90%B4%E6%99%8B.html" title="User:吴晋">吴晋</a>, <a href="../../../l/o/o/User%7ELookou.html" title="User:Lookou">林晓鑫</a>, <a href="../../../x/i/o/User%7EXiongfei.html" class="new" title="User:Xiongfei">xiongfei</a>, <a href="../../../w/a/n/User%7EWangyao.html" title="User:Wangyao">王耀</a>, <a href="../../../l/i/c/User%7ELiChao_5d68.html" class="new" title="User:LiChao">李超</a>, <a href="../../../x/u/x/User%7EXuxingpeng.html" class="new" title="User:Xuxingpeng">徐兴鹏</a> 和 <a href="../../../v/a/l/User%7EValenti.html" class="new" title="User:Valenti">刘羲</a>. </p>
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'><strong><a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑本页</a></strong> |
<a href="../../../d/o/c/Talk%7EDoc_Paper_For_Contest_53db.html" title="Talk:Doc Paper For Contest">讨论本页</a> |
<a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">较早版本</a> |
<a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a> |
<a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><br />

<br /><a href="../../../index.html" title="首页">首页</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%85%B3%E4%BA%8E.html" title="Wikipedia:关于">关于Wikipedia</a> | <a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> | <form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form><br /><span id="pagestats">本页面已经被浏览2,142次。 This page was last modified 23:22 2006年6月29日 by <a href="../../../s/h/e/User%7EShenjinbo.html" class="new" title="User:Shenjinbo">沈锦波</a>. Based on work by <a href="../../../%E5%91%A8/%E8%93%9D/%E7%8F%BA/User%7E%E5%91%A8%E8%93%9D%E7%8F%BA.html" class="new" title="User:周蓝珺">周蓝珺</a>, <a href="../../../%E5%90%B4/%E6%99%8B/_/User%7E%E5%90%B4%E6%99%8B.html" title="User:吴晋">吴晋</a>, <a href="../../../l/o/o/User%7ELookou.html" title="User:Lookou">林晓鑫</a>, <a href="../../../x/i/o/User%7EXiongfei.html" class="new" title="User:Xiongfei">xiongfei</a>, <a href="../../../w/a/n/User%7EWangyao.html" title="User:Wangyao">王耀</a>, <a href="../../../l/i/c/User%7ELiChao_5d68.html" class="new" title="User:LiChao">李超</a>, <a href="../../../x/u/x/User%7EXuxingpeng.html" class="new" title="User:Xuxingpeng">徐兴鹏</a> 和 <a href="../../../v/a/l/User%7EValenti.html" class="new" title="User:Valenti">刘羲</a>. </span></td></tr></table>
</div>
</div>

<div id='quickbar'>
<a href='../../../index.html'><img src='../../../../skins/common/images/wiki.jpg' alt='[首页]' /></a>
<hr class='sep' /><a href="../../../index.html">首页</a>
<br /><a href="../../../c/o/m/WIKI-HIT_IBM_CLUB%7ECommunity_Portal_9150.html">社区</a>
<br /><a href="../../../c/u/r/Current_events.html">新闻动态</a>
<br /><a href="../../../r/e/c/Special%7ERecentchanges.html">最近更改</a>
<br /><a href="../../../r/a/n/Special%7ERandom.html">随机页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html">帮助</a>
<br /><a href="../../../s/i/t/WIKI-HIT_IBM_CLUB%7ESite_support.html">Donations</a>
<br />
<hr class='sep' /><strong><a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">编辑本页</a></strong>
<br /><a href="../../../d/o/c/Talk%7EDoc_Paper_For_Contest_53db.html" title="Talk:Doc Paper For Contest">讨论本页</a>
<br /><a href="../../../d/o/c/Doc_Paper_For_Contest_c57e.html" title="Doc Paper For Contest">较早版本</a>
<br /><a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a>
<br /><a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><hr class='sep' /><a href="../../../s/p/e/Special%7ESpecialpages.html" title="Special:Specialpages">特殊页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A.html" title="Wikipedia:错误报告">错误报告</a>
<br /></div>
<!-- Served by dns.cs.hit.edu.cn in 1351392771.17 secs. -->
</body></html>