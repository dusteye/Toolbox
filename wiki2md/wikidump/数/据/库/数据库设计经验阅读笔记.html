<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn" >
<head>
<title>数据库设计经验阅读笔记 - WIKI-HIT IBM CLUB</title>
<meta name="KEYWORDS" content="首页,ALP,Address,Android,Android Newbie Guide,Android Project Development,Android Research Field,Android Third Party Lib And Tool,BoardGame,CSAPP" />
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../../../../skins/common/wikiprintable.css' />
<script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
<style type='text/css'>
/*/*/ /*<![CDATA[*/
@import "../../../../skins/common/wikistandard.css";
@import "../../../s/t/a/MediaWiki%7EStandard.css.html";
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px; border-right: 1px solid gray; }
#article { margin-left: 152px; margin-right: 4px; }

/*]]>*/ /* */
</style>
</head>

<body bgcolor='#FFFFFF' onload=''>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
<td width='152' rowspan='1'>&nbsp;</td><td class="top" align='left' valign='top'>
<a href="../../../index.html" title="首页">首页</a> |
<a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> |
<a href="../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html" title="数据库设计经验阅读笔记">编辑本页</a> |
<a href="../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html" title="数据库设计经验阅读笔记">较早版本</a><p class='subtitle'><a href="../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html">可打印版</a> | <a href="../../../g/e/n/WIKI-HIT_IBM_CLUB%7EGeneral_disclaimer.html" title="WIKI-HIT IBM CLUB:General disclaimer">Disclaimers</a></p>
</td>
<td class="top" valign='top' align='right' nowrap='nowrap'>Not logged in
<br /><a href="../../../u/s/e/Special%7EUserlogin.html" title="Special:Userlogin">登录</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html" title="Wikipedia:帮助">帮助</a>
<br /><form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form></td></tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">数据库设计经验阅读笔记</h1><p class='subtitle'>Wikipedia，自由的百科全书</p>
<p>原文出处：<a href="http://dev.csdn.net/develop/article/50/50124.shtm" class='external free' title="http://dev.csdn.net/develop/article/50/50124.shtm" rel="nofollow">http://dev.csdn.net/develop/article/50/50124.shtm</a>
</p><p>标题：数据库设计经验
</p><p>作者： xlovem
</p><p>这里只是阅读后的摘抄，如果对这篇文章感兴趣请阅读原文。
</p><p>注解颜色说明：<font color="red">红色代表我没看懂</font> <font color="blue">蓝色代表我认为很有用</font>  <font color="orange">橙色是我的注解</font>
</p>
<ul><li> <b>定义标准的对象命名规范</b>
</li></ul>
<p>o 表内的列[字段]要针对键采用一整套设计规则。比如，如果键是数字类型，你可以用 _N 作为后缀；如果是字符类型则可以采用 _C 后缀
</p>
<ul><li> <b>获取数据模式资源手册</b>
</li></ul>
<p>o 《数据模式资源手册》  Len Silverston、W. H. Inmon 和 Kent Graziano著
</p>
<ul><li> <b>一定要记住过去的经验教训</b>
</li><li> <b>创建 ER 图表和数据字典</b>
</li></ul>
<p>o 有一份诸如 ER 图表等最新文档其重要性如何强调都不过分，这对表明表之间关系很有用，而数据字典则说明了每个字段的用途以及任何可能存在的别名。对 SQL 表达式的文档化来说这是完全必要的。
</p>
<ul><li> <b>检查各种变化</b>
</li></ul>
<p>o 比方说，姓氏就是如此（注意是西方人的姓氏，比如女性结婚后从夫姓等）。所以，在建立系统存储客户信息时，我倾向于在单独的一个数据表里存储姓氏字段，而且还附加起始日和终止日等字段，这样就可以跟踪这一数据条目的变化。 
</p>
<ul><li> <b>采用前缀命名</b>
</li></ul>
<p>o 如果多个表里有好多同一类型的字段（比如 FirstName），你不妨用特定表的前缀（比如 CusLastName）来帮助你标识字段。
</p>
<ul><li> <font color="red"><b>标准化和数据驱动</b></font>
</li></ul>
<p>o 数据的标准化不仅方便了自己而且也方便了其他人。比方说，假如你的用户界面要访问外部数据源（文件、XML 文档、其他数据库等），你不妨把相应的连接和路径信息存储在用户界面支持表里。还有，如果用户界面执行工作流之类的任务（发送邮件、打印信笺、修改记录状态等），那么产生工作流的数据也可以存放在数据库里。预先安排总需要付出努力，但如果这些过程采用数据驱动而非硬编码的方式，那么策略变更和维护都会方便得多。事实上，如果过程是数据驱动的，你就可以把相当大的责任推给用户，由用户来维护自己的工作流过程。
</p>
<ul><li> <font color="blue"><b>不活跃或者不采用的指示符</b></font>
</li></ul>
<p>o 增加一个字段表示所在记录是否在业务中不再活跃挺有用的。不管是客户、员工还是其他什么人，这样做都能有助于再运行查询的时候过滤活跃或者不活跃状态
</p>
<ul><li> <font color="blue"><b>使用角色实体定义属于某类别的列[字段]</b> </font>
</li></ul>
<p>o 比方说，当 John Smith, Engineer 提升为 John Smith, Director 乃至最后爬到 John Smith, CIO 的高位，而所有你要做的不过是改变两个表 PERSON 和 PERSON_TYPE 之间关系的键值，同时增加一个日期/时间字段来知道变化是何时发生的。这样，你的 PERSON_TYPE 表就包含了所有 PERSON 的可能类型，比如 Associate、Engineer、Director、CIO 或者 CEO 等。
</p><p>还有个替代办法就是改变 PERSON 记录来反映新头衔的变化，不过这样一来在时间上无法跟踪个人所处位置的具体时间。 
</p>
<ul><li> <b>用户来自世界各地</b> <font color="orange">这一条似乎要求程序设计人员有较高的人文素养</font>
</li></ul>
<p>o 在设计用到网络或者具有其他国际特性的数据库时，一定要记住大多数国家都有不同的字段格式，比如邮政编码等，有些国家，比如新西兰就没有邮政编码一说。
</p>
<ul><li> <b>每个表中都应该添加的</b> 3 个有用的字段
</li></ul>
<p>o dRecordCreationDate，在 VB 下默认是 Now()，而在 SQL Server 下默认为 GETDATE()
</p><p>o sRecordCreator，在 SQL Server 下默认为 NOT NULL DEFAULT USER
</p><p>o nRecordVersion，记录的版本标记；有助于准确说明记录中出现 null 数据或者丢失数据的原因
</p>
<ul><li> <font color="blue"><b>使用多个名称字段</b></font> <font color="orange">这个很容易想不到</font>
</li></ul>
<p>o 建议应该把姓氏和名字当作两个字段来处理，然后在查询的时候再把他们组合起来
</p>
<ul><li> <font color="blue"><b>提防大小写混用的对象名和特殊字符</b></font>
</li></ul>
<p>o 采用全部大写而且包含下划符的名字具有更好的可读性（CUSTOMER_DATA），绝对不要在对象名的字符之间留空格
</p>
<ul><li> <b>小心保留词</b>
</li><li> <b>保持字段名和类型的一致性</b>
</li></ul>
<p>o 假如字段在某个表中叫做“agreement_number”，你就别在另一个表里把名字改成“ref1”。假如数据类型在一个表里是整数，那在另一个表里可就别变成字符型了。
</p>
<ul><li> <font color="red"><b>删除标记</b></font>
</li></ul>
<p>o 在表中包含一个“删除标记”字段，这样就可以把行标记为删除。在关系数据库里不要单独删除某一行；最好采用清除数据程序而且要仔细维护索引整体性。
</p>
<ul><li> <b>给文本字段留足余量</b>
</li></ul>
<p>o ID 类型的文本字段，比如客户 ID 或定单号等等都应该设置得比一般想象更大，因为时间不长你多半就会因为要添加额外的字符而难堪不已。比方说，<font color="blue">假设你的客户 ID 为 10 位数长。那你应该把数据库表字段的长度设为 12 或者 13 个字符长。</font>这算浪费空间吗？是有一点，但也没你想象的那么多：一个字段加长 3 个字符在有 1 百万条记录，再加上一点索引的情况下才不过让整个数据库多占据 3MB 的空间。但这额外占据的空间却无需将来重构整个数据库就可以实现数据库规模的增长了。身份证的号码从 15 位变成 18 位就是最好和最惨痛的例子。
</p>
<ul><li> <b>列[字段]命名技巧</b>
</li></ul>
<p>o 我们发现，假如你给每个表的列[字段]名都采用统一的前缀，那么在编写 SQL 表达式的时候会得到大大的简化。
</p><p>o 举个简单的例子，假设有两个表：
</p>
<pre>Customer 和 Order。Customer 表的前缀是 cu_，所以该表内的子段名如下：cu_name_id、cu_surname、
cu_initials 和cu_address 等。Order 表的前缀是 or_，所以子段名是：
or_order_id、or_cust_name_id、or_quantity 和 or_description 等。
这样从数据库中选出全部数据的 SQL 语句可以写成如下所示：
Select * From Customer, Order Where cu_surname = "MYNAME"&nbsp;;
and cu_name_id = or_cust_name_id and or_quantity = 1
在没有这些前缀的情况下则写成这个样子（用别名来区分）：
Select * From Customer, Order Where Customer.surname = "MYNAME"&nbsp;;
and Customer.name_id = Order.cust_name_id and Order.quantity = 1
</pre>
<ul><li> <font color="red"><b>使用系统生成的主键</b></font> <font color="orange">这个不太看得懂，不过似乎应该有用</font>
</li></ul>
<p>o 但我觉得有必要在这里重复提醒大家。假如你总是在设计数据库的时候采用系统生成的键作为主键，那么你实际控制了数据库的索引完整性。这样，数据库和非人工机制就有效地控制了对存储数据中每一行的访问。
</p><p>采用系统生成键作为主键还有一个优点：当你拥有一致的键结构时，找到逻辑缺陷很容易。
</p>
<ul><li> <b>别忘了索引 </b> <font color="orange">可我还要问什么是索引？</font>
</li></ul>
<p>o 索引是从数据库中获取数据的最高效方式之一。95% 的数据库性能问题都可以采用索引技术得到解决。作为一条规则，我通常对逻辑主键使用唯一的成组索引，对系统键（作为存储过程）采用唯一的非成组索引，对任何外键列[字段]采用非成组索引。不过，索引就象是盐，太多了菜就咸了。
</p><p>o 大多数数据库都索引自动创建的主键字段，但是可别忘了索引外键，它们也是经常使用的键，比如运行查询显示主表和所有关联表的某条记录就用得上。还有，不要索引 memo/note 字段，不要索引大型字段（有很多字符），这样作会让索引占用太多的存储空间。
</p><p>o 不要索引常用的小型表
</p><p>o 不要为小型数据表设置任何键，假如它们经常有插入和删除操作就更别这样作了。对这些插入和删除操作的索引维护可能比扫描表空间消耗更多的时间。
</p><p>o 不要把社会保障号码（SSN）或身份证号码（ID）选作键
永远都不要使用 SSN 或 ID 作为数据库的键。除了隐私原因以外，须知政府越来越趋向于不准许把 SSN 或 ID 用作除收入相关以外的其他目的，SSN 或 ID 需要手工输入。永远不要使用手工输入的键作为主键，因为一旦你输入错误，你唯一能做的就是删除整个记录然后从头开始。
</p>
<ul><li> <b>不要用用户的键</b> <font color="orange">这个不是明摆着的事么？不过也许主键不会，那外键呢？还是注意一下的好</font>
</li><li> <b>关系</b> <font color="orange">这个会经常遇到，应该警惕</font>
</li></ul>
<p>o 如果两个实体之间存在多对一关系，而且还有可能转化为多对多关系，那么你最好一开始就设置成多对多关系。从现有的多对一关系转变为多对多关系比一开始就是多对多关系要难得多
</p>
<ul><li> <b>文档、文档、文档</b>
</li></ul>
<p>o 对所有的快捷方式、命名规范、限制和函数都要编制文档。
</p>
<ul><li> <b>保存常用信息</b> 〈font color="orange"&gt;既然小，就作吧&lt;/font&gt;
</li></ul>
<p>o 让一个表专门存放一般数据库信息非常有用。我常在这个表里存放数据库当前版本、最近检查/修复（对 FoxPro）、关联设计文档的名称、客户等信息。这样可以实现一种简单机制跟踪数据库，当客户抱怨他们的数据库没有达到希望的要求而与你联系时，这样做对非客户机/服务器环境特别有用。
</p><p>终于看完了，有几点是新的收获，比如姓名字段的打散，字段空间的可扩展性等。不过也引发了很多问题：数据库索引、触发器等的概念和使用、对数据库速度的影响因素几个因素的权重、读写查询更新等操作对数据库的要求和各自的速度。这些都是涉及大型数据库应该考虑的，不过我们暂时还考虑不到这么高的层次，毕竟还没有经验，而且面对的也不是大型的商业项目，可以暂时不放在最重要的地位考虑。
</p>
<div class="printfooter">
<p>取自"<a href="http://dns.cs.hit.edu.cn../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html">http://dns.cs.hit.edu.cn../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html</a>"</p>

<p>本页面已经被浏览23次。 This page was last modified 13:15 2006年5月29日 by <a href="../../../d/y/i/User%7EDyingcow.html" title="User:Dyingcow">刘奭</a>.  </p>
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'><strong><a href="../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html" title="数据库设计经验阅读笔记">编辑本页</a></strong> |
<a href="../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/Talk%7E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html" class="new" title="Talk:数据库设计经验阅读笔记">讨论本页</a> |
<a href="../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html" title="数据库设计经验阅读笔记">较早版本</a> |
<a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a> |
<a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><br />

<br /><a href="../../../index.html" title="首页">首页</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%85%B3%E4%BA%8E.html" title="Wikipedia:关于">关于Wikipedia</a> | <a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> | <form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form><br /><span id="pagestats">本页面已经被浏览23次。 This page was last modified 13:15 2006年5月29日 by <a href="../../../d/y/i/User%7EDyingcow.html" title="User:Dyingcow">刘奭</a>.  </span></td></tr></table>
</div>
</div>

<div id='quickbar'>
<a href='../../../index.html'><img src='../../../../skins/common/images/wiki.jpg' alt='[首页]' /></a>
<hr class='sep' /><a href="../../../index.html">首页</a>
<br /><a href="../../../c/o/m/WIKI-HIT_IBM_CLUB%7ECommunity_Portal_9150.html">社区</a>
<br /><a href="../../../c/u/r/Current_events.html">新闻动态</a>
<br /><a href="../../../r/e/c/Special%7ERecentchanges.html">最近更改</a>
<br /><a href="../../../r/a/n/Special%7ERandom.html">随机页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html">帮助</a>
<br /><a href="../../../s/i/t/WIKI-HIT_IBM_CLUB%7ESite_support.html">Donations</a>
<br />
<hr class='sep' /><strong><a href="../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html" title="数据库设计经验阅读笔记">编辑本页</a></strong>
<br /><a href="../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/Talk%7E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html" class="new" title="Talk:数据库设计经验阅读笔记">讨论本页</a>
<br /><a href="../../../%E6%95%B0/%E6%8D%AE/%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html" title="数据库设计经验阅读笔记">较早版本</a>
<br /><a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a>
<br /><a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><hr class='sep' /><a href="../../../s/p/e/Special%7ESpecialpages.html" title="Special:Specialpages">特殊页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A.html" title="Wikipedia:错误报告">错误报告</a>
<br /></div>
<!-- Served by dns.cs.hit.edu.cn in 1351392730.44 secs. -->
</body></html>