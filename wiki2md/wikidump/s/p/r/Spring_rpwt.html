<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn" >
<head>
<title>Spring rpwt - WIKI-HIT IBM CLUB</title>
<meta name="KEYWORDS" content="首页,ALP,Address,Android,Android Newbie Guide,Android Project Development,Android Research Field,Android Third Party Lib And Tool,BoardGame,CSAPP" />
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../../../../skins/common/wikiprintable.css' />
<script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
<style type='text/css'>
/*/*/ /*<![CDATA[*/
@import "../../../../skins/common/wikistandard.css";
@import "../../../s/t/a/MediaWiki%7EStandard.css.html";
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px; border-right: 1px solid gray; }
#article { margin-left: 152px; margin-right: 4px; }

/*]]>*/ /* */
</style>
</head>

<body bgcolor='#FFFFFF' onload=''>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
<td width='152' rowspan='1'>&nbsp;</td><td class="top" align='left' valign='top'>
<a href="../../../index.html" title="首页">首页</a> |
<a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> |
<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑本页</a> |
<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">较早版本</a><p class='subtitle'><a href="../../../s/p/r/Spring_rpwt.html">可打印版</a> | <a href="../../../g/e/n/WIKI-HIT_IBM_CLUB%7EGeneral_disclaimer.html" title="WIKI-HIT IBM CLUB:General disclaimer">Disclaimers</a></p>
</td>
<td class="top" valign='top' align='right' nowrap='nowrap'>Not logged in
<br /><a href="../../../u/s/e/Special%7EUserlogin.html" title="Special:Userlogin">登录</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html" title="Wikipedia:帮助">帮助</a>
<br /><form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form></td></tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">Spring rpwt</h1><p class='subtitle'>Wikipedia，自由的百科全书</p>
<table id='toc' class='toc'><tr><td><div id='toctitle'><h2>目录</h2></div>
<ul>
<li class='toclevel-1'><a href="#Spring_MVC_Step-By-Step"><span class="tocnumber">1</span> <span class="toctext">Spring MVC Step-By-Step</span></a>
<ul>
<li class='toclevel-2'><a href="#Part_One"><span class="tocnumber">1.1</span> <span class="toctext">Part One</span></a>
<ul>
<li class='toclevel-3'><a href="#.E4.B8.8D.E8.A6.81.E5.BF.98.E4.BA.86.E4.BD.A0.E7.9A.84lib"><span class="tocnumber">1.1.1</span> <span class="toctext">不要忘了你的lib</span></a></li>
<li class='toclevel-3'><a href="#.2A.2A-servlet.xml.E7.9A.84.E9.97.AE.E9.A2.98"><span class="tocnumber">1.1.2</span> <span class="toctext">**-servlet.xml的问题</span></a></li>
</ul>
</li>
<li class='toclevel-2'><a href="#Part_Two"><span class="tocnumber">1.2</span> <span class="toctext">Part Two</span></a>
<ul>
<li class='toclevel-3'><a href="#Error:According_to_TLD_or_attribute_directive_in_tag_file.2C_attribute_value_does_not_accept_any_expressions"><span class="tocnumber">1.2.1</span> <span class="toctext">Error:According to TLD or attribute directive in tag file, attribute value does not accept any expressions</span></a></li>
<li class='toclevel-3'><a href="#messages.properties.E7.9A.84.E4.BD.BF.E7.94.A8.E9.97.AE.E9.A2.98"><span class="tocnumber">1.2.2</span> <span class="toctext">messages.properties的使用问题</span></a></li>
<li class='toclevel-3'><a href="#springapp.log.E6.96.87.E4.BB.B6.E7.9A.84.E4.BF.9D.E5.AD.98.E4.BD.8D.E7.BD.AE"><span class="tocnumber">1.2.3</span> <span class="toctext">springapp.log文件的保存位置</span></a></li>
</ul>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#.E5.90.8E.E7.BB.AD.E9.97.AE.E9.A2.98"><span class="tocnumber">2</span> <span class="toctext">后续问题</span></a>
<ul>
<li class='toclevel-2'><a href="#.E4.B8.8D.E8.BF.9B.E5.85.A5FormController.E6.80.8E.E4.B9.88.E5.8A.9E.EF.BC.9F"><span class="tocnumber">2.1</span> <span class="toctext">不进入FormController怎么办？</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<p><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "显示"; var tocHideText = "隐藏"; showTocToggle(); } </script>
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑</a>]</div><a name="Spring_MVC_Step-By-Step"></a><h2> Spring MVC Step-By-Step </h2>	 
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑</a>]</div><a name="Part_One"></a><h3> Part One </h3>	 
<hr />	 
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑</a>]</div><a name=".E4.B8.8D.E8.A6.81.E5.BF.98.E4.BA.86.E4.BD.A0.E7.9A.84lib"></a><h4><font color="orange">不要忘了你的lib</font></h4>	 
<p>之前用Ant做过一遍，完全的手动拷贝完成，所以没什么问题。	 
</p><p>但是用MyEclipse时，遭遇RPWT（其实是 IQWPT，不过这样叫还好一些吧），想当然的认为MyEclipse会自动加载好Spring的框架，也就是不需要我手动向lib文件夹里添加 spring.jar。但是实践告诉我，错了。MyEclipse只是提供一个编辑工具，会自动作很多事情，但是不会自动添加lib里面的内容，还是需要手动添的！！	 
</p><p>不过，这次犯错也让我有机会仔细阅的那些配置文件，相信对以后的Part会有些帮助。	 
</p><p>检讨完毕，继续学习。	 
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑</a>]</div><a name=".2A.2A-servlet.xml.E7.9A.84.E9.97.AE.E9.A2.98"></a><h4><font color="orange">**-servlet.xml的问题</font></h4>	 
<p>这个问题是博士遇到的，由于少了这一行DTD链接，使得bean不能够被正常解析，tomcat报错。	 
</p><p>&lt;!DOCTYPE beans PUBLIC &quot;-//SPRING//DTD BEAN//EN&quot; &quot;http://www.springframework.org/dtd/spring-beans.dtd&quot;&gt;
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑</a>]</div><a name="Part_Two"></a><h3> Part Two </h3>
<hr />
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑</a>]</div><a name="Error:According_to_TLD_or_attribute_directive_in_tag_file.2C_attribute_value_does_not_accept_any_expressions"></a><h4><font color="orange">Error:According to TLD or attribute directive in tag file, attribute value does not accept any expressions</font></h4>
<p><b>背景信息</b>：问题出现在WEB-INF/jsp/hello.jsp（7，24）中，出错位置代码：&lt;c:out value="${now}" /&gt; 
now是一个String类型的变量，是由SpringappController传过来的。
</p><p><b>问题分析</b>：开始以为是hello.jsp中的 &lt;c:out value="${now}" /&gt; 一句中的变量now不能获取造成的，所以用String常量取代引号内的部分，通过。换成变量之后还是不行。
</p><p><b>解决途径</b>：google了一下，竟然发现解决途径——<b>将web.xml的&lt;web-app&gt;中的属性部分去掉</b>
</p><p><b>事后处理</b>：为什么web.xml里的这些属性设定会影响到这里呢？！！<font color="red">还在寻找答案中……</font>那天问cowoo，说有可能是和版本有关
</p>
<pre><a href="http://spring.jactiongroup.net/viewtopic.php?t=962&amp;sid=9cf3c523e11d0a290baee17bb624b945" class='external text' title="http://spring.jactiongroup.net/viewtopic.php?t=962&amp;sid=9cf3c523e11d0a290baee17bb624b945" rel="nofollow">网上查到的解决方法</a>
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑</a>]</div><a name="messages.properties.E7.9A.84.E4.BD.BF.E7.94.A8.E9.97.AE.E9.A2.98"></a><h4><font color="orange">messages.properties的使用问题</font></h4>
<p><b>背景信息</b>：messages.properties是用来保存&lt;fmt:message&gt;中显示信息的文本文件。jsp中用&lt;fmt:message key="key"&gt;来读取信息
</p><p><b>问题分析</b>：一开始以为是&lt;fmt&gt;标签使用不对，未果。再核查messages.properties（注意文件名的单复数），未果。
</p><p><b>解决途径</b>：删除classes中编译好的.class文件，OK。
</p><p><b>事后处理</b>：虽说改动了.java文件，但是eclipse可以在修改后保存时自动重新编译.java，并替换掉classes中的.class文件。那问什么还必须删除原有的.class，重新编译呢？除了删除了三个对应的.class文件，我什么都没改动，MVC-Step-By-Step中也提到要求清空原有的所有文件呢？应该有可能是和Spring的框架有关。
</p><p><br />
<b>解答</b>：对于你这个问题我有一种解答的方法，那就是我们在将项目加载到Tomcat时，所有的.java都是编译过的。但是如果你在这时候再重新改动.java文件，但是你不重新加载这个项目或者重新启动Tomcat，那么你重新编写的.java文件根本就没有加载到tomcat的webapp下面，不信你可以改变这里的一个.java文件然后再到webapp下面察看，那些文件就没有发生变化，但是当你重新启动tomcat的时候，在webapp下面的文件都会使你最新改变的。这也许就是myeclipse这个插件做的不是很好的地方了。我就这样试过，必须重新启动tomcat，webapp下面的.class文件才能重新编译。--<a href="../../../m/y/q/User%7EMyqhit.html" class="new" title="User:Myqhit">Myqhit</a> 16:53 2006年6月13日 (CST)马玉清
</p><p><i>这个回答可以接受，想来也只有这个原因最可能。</i><a href="../../../d/y/i/User%7EDyingcow.html" title="User:Dyingcow">Dyingcow</a> 12:06 2006年6月14日 (CST)
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑</a>]</div><a name="springapp.log.E6.96.87.E4.BB.B6.E7.9A.84.E4.BF.9D.E5.AD.98.E4.BD.8D.E7.BD.AE"></a><h4><font color="orange">springapp.log文件的保存位置</font></h4>
<p>在log4j.properties中有这样一句：
</p>
<pre>log4j.appender.logfile.File=/Users/trisberg/jakarta-tomcat-5.0.28/logs/springapp.log
</pre>
<p>不知道这里指的根目录在哪里，后来发现，很简单，在c:根目录，文章的作者似乎是将tomcat安在了c:/Users/trisberg中。
</p><p>不过这个实验与这个路径无关，因为它将输出重定向到stdout了，不过那个.log文件还是会建立的，大小为0KB而已
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑</a>]</div><a name=".E5.90.8E.E7.BB.AD.E9.97.AE.E9.A2.98"></a><h2> 后续问题 </h2>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑</a>]</div><a name=".E4.B8.8D.E8.BF.9B.E5.85.A5FormController.E6.80.8E.E4.B9.88.E5.8A.9E.EF.BC.9F"></a><h3><font color="orange">不进入FormController怎么办？</font></h3>
<p>经常会遇到这种事：Form提交后，页面没有经过<b>SimpleFormController</b>的处理，直接跳转到一个页面，可能是formView,可能是successView。
</p><p>这里需要注意一个小问题，就是你import的BindException是哪里的？正确的应该是org.springframework.validation.BindException，而不是java.net.BindException
这里实际上是onSubmit方法的override问题，由于入口参数使用的BindException不是同一个类，所以没有override成功，实际使用的时候还是会调用父类SimplrFormController的submit方法，而不是你自己编写的方法。
</p><p>之后会怎么样呢？那要来看看SimpleFormController的源代码了：
</p><p><code>
protected void doSubmitAction(Object command) throws Exception {
	}
</p><p>protected ModelAndView onSubmit(Object command) throws Exception {
		doSubmitAction(command);
		return null;
	}
</p><p>protected ModelAndView onSubmit(Object command, BindException errors) throws Exception {
		ModelAndView mv = onSubmit(command);
		if (mv&nbsp;!= null) {
			// simplest onSubmit version implemented in custom subclass
			return mv;
		}
		else {
			// default behavior: render success view
			if (getSuccessView() == null) {
				throw new ServletException("successView isn't set");
			}
			return new ModelAndView(getSuccessView(), errors.getModel());
		}
	}
</p><p>protected ModelAndView onSubmit(
			HttpServletRequest request,	HttpServletResponse response, Object command,	BindException errors)
			throws Exception {
</p><p>		return onSubmit(command, errors);
	}
</p><p></code>
</p><p>这里可以看出相互调用关系，如果不复写onSubmit方法，会默认跳转到successView页面。
</p><p><br />
</p><p>但是，这里还有没有解决的问题，比如我遇到的是一直跳转到formView，不是seccessView；马玉清用的AbstractFormController，可以实现正常的跳转功能，但是就是没进入他的Controller！！
</p>
<div class="printfooter">
<p>取自"<a href="http://dns.cs.hit.edu.cn../../../s/p/r/Spring_rpwt.html">http://dns.cs.hit.edu.cn../../../s/p/r/Spring_rpwt.html</a>"</p>

<p>本页面已经被浏览72次。 This page was last modified 06:04 2006年6月17日 by <a href="../../../d/y/i/User%7EDyingcow.html" title="User:Dyingcow">刘奭</a>. Based on work by <a href="../../../m/y/q/User%7EMyqhit.html" class="new" title="User:Myqhit">马玉清</a>. </p>
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'><strong><a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑本页</a></strong> |
<a href="../../../s/p/r/Talk%7ESpring_rpwt.html" class="new" title="Talk:Spring rpwt">讨论本页</a> |
<a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">较早版本</a> |
<a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a> |
<a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><br />

<br /><a href="../../../index.html" title="首页">首页</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%85%B3%E4%BA%8E.html" title="Wikipedia:关于">关于Wikipedia</a> | <a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> | <form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form><br /><span id="pagestats">本页面已经被浏览72次。 This page was last modified 06:04 2006年6月17日 by <a href="../../../d/y/i/User%7EDyingcow.html" title="User:Dyingcow">刘奭</a>. Based on work by <a href="../../../m/y/q/User%7EMyqhit.html" class="new" title="User:Myqhit">马玉清</a>. </span></td></tr></table>
</div>
</div>

<div id='quickbar'>
<a href='../../../index.html'><img src='../../../../skins/common/images/wiki.jpg' alt='[首页]' /></a>
<hr class='sep' /><a href="../../../index.html">首页</a>
<br /><a href="../../../c/o/m/WIKI-HIT_IBM_CLUB%7ECommunity_Portal_9150.html">社区</a>
<br /><a href="../../../c/u/r/Current_events.html">新闻动态</a>
<br /><a href="../../../r/e/c/Special%7ERecentchanges.html">最近更改</a>
<br /><a href="../../../r/a/n/Special%7ERandom.html">随机页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html">帮助</a>
<br /><a href="../../../s/i/t/WIKI-HIT_IBM_CLUB%7ESite_support.html">Donations</a>
<br />
<hr class='sep' /><strong><a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">编辑本页</a></strong>
<br /><a href="../../../s/p/r/Talk%7ESpring_rpwt.html" class="new" title="Talk:Spring rpwt">讨论本页</a>
<br /><a href="../../../s/p/r/Spring_rpwt.html" title="Spring rpwt">较早版本</a>
<br /><a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a>
<br /><a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><hr class='sep' /><a href="../../../s/p/e/Special%7ESpecialpages.html" title="Special:Specialpages">特殊页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A.html" title="Wikipedia:错误报告">错误报告</a>
<br /></div>
<!-- Served by dns.cs.hit.edu.cn in 1351392736.50 secs. -->
</body></html>