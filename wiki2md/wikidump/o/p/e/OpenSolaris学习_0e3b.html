<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn" >
<head>
<title>OpenSolaris学习 - WIKI-HIT IBM CLUB</title>
<meta name="KEYWORDS" content="首页,ALP,Address,Android,Android Newbie Guide,Android Project Development,Android Research Field,Android Third Party Lib And Tool,BoardGame,CSAPP" />
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../../../../skins/common/wikiprintable.css' />
<script type="text/javascript" src="../../../../skins/common/wikibits.js"></script>
<style type='text/css'>
/*/*/ /*<![CDATA[*/
@import "../../../../skins/common/wikistandard.css";
@import "../../../s/t/a/MediaWiki%7EStandard.css.html";
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px; border-right: 1px solid gray; }
#article { margin-left: 152px; margin-right: 4px; }

/*]]>*/ /* */
</style>
</head>

<body bgcolor='#FFFFFF' onload=''>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
<td width='152' rowspan='1'>&nbsp;</td><td class="top" align='left' valign='top'>
<a href="../../../index.html" title="首页">首页</a> |
<a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> |
<a href="../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html" title="OpenSolaris学习">编辑本页</a> |
<a href="../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html" title="OpenSolaris学习">较早版本</a><p class='subtitle'><a href="../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html">可打印版</a> | <a href="../../../g/e/n/WIKI-HIT_IBM_CLUB%7EGeneral_disclaimer.html" title="WIKI-HIT IBM CLUB:General disclaimer">Disclaimers</a></p>
</td>
<td class="top" valign='top' align='right' nowrap='nowrap'>Not logged in
<br /><a href="../../../u/s/e/Special%7EUserlogin.html" title="Special:Userlogin">登录</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html" title="Wikipedia:帮助">帮助</a>
<br /><form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form></td></tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">OpenSolaris学习</h1><p class='subtitle'>Wikipedia，自由的百科全书</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html" title="OpenSolaris学习">编辑</a>]</div><a name="OpenSolaris.E5.AD.A6.E4.B9.A0.E7.AC.94.E8.AE.B0"></a><h1> <i><b>OpenSolaris学习笔记</b></i></h1>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html" title="OpenSolaris学习">编辑</a>]</div><a name=".E7.BD.91.E7.BB.9C.E7.AE.A1.E7.90.86.E5.92.8C.E7.9B.91.E8.A7.86.E6.96.B9.E9.9D.A2.E7.9A.84.E5.91.BD.E4.BB.A4"></a><h2>网络管理和监视方面的命令</h2>
<p>netstat命令
</p>
<pre>ibmtc@opensolaris:~$ netstat -i
Name  Mtu  Net/Dest      Address        Ipkts  Ierrs Opkts  Oerrs Collis Queue 
lo0   8232 loopback      opensolaris.local 15     0     15     0     0      0     
iprb0 1500 opensolaris   opensolaris    164502 0     24592  7     0      0     
</pre>
<pre>Name  Mtu  Net/Dest                    Address                     Ipkts  Ierrs Opkts  Oerrs Collis
lo0   8252 opensolaris                 opensolaris                 15     0     15     0     0     
</pre>
<pre>ibmtc@opensolaris:~$ netstat -i 3
   input   iprb0     output       input  (Total)    output
packets errs  packets errs  colls  packets errs  packets errs  colls 
164686  0     24695   7     0      164701  0     24710   7     0     
3       0     2       0     0      3       0     2       0     0
</pre>
<p>netstat -i 可以用来统计当前的packets，以此也可以来监视当前的活动。另外该命令可以被更多用来做<b>错误的统计</b>。
</p><p>netstat -s 可以从kstat中获取网络相关的一些统计数据。
</p><p><br />
</p><p>kstat命令
</p>
<pre>ibmtc@opensolaris:~$ kstat -m tcp
module: tcp                             instance: 0     
name:   tcp                             class:    mib2
        activeOpens                     766
        attemptFails                    116
        connTableSize                   68
        connTableSize6                  96
        crtime                          28.098735663
        currEstab                       2
        estabResets                     19
        halfOpenDrop                    0
        inAckBytes                      1863851
        inAckSegs                       5940
        inAckUnsent                     0
        inClosed                        14
        inDataDupBytes                  17749
        inDataDupSegs                   199
        inDataInorderBytes              10718673
        inDataInorderSegs               11504
        inDataPartDupBytes              438
        ....
</pre>
<p>用kstat -m 可以方便的查询当前某个模块的状态。
</p><p>另外还有一些工具，如se，可以让我们自己写一些性能监视的工具，不过我们的机器上貌似没装。。。
</p><p>关于nfs的相关数据可以用nfsstat命令来查看，其中 -s查看服务器，-c查看客户端
</p>
<pre>ibmtc@opensolaris:~$ nfsstat -s
</pre>
<pre>Server rpc:
Connection oriented:
calls      badcalls   nullrecv   badlen     xdrcall    dupchecks  dupreqs    
0          0          0          0          0          0          0          
Connectionless:
calls      badcalls   nullrecv   badlen     xdrcall    dupchecks  dupreqs    
0          0          0          0          0          0          0          
</pre>
<pre>Server NFSv2:
calls     badcalls  
0         0         
</pre>
<pre>Server NFSv3:
calls     badcalls  
0         0         
</pre>
<pre>Server NFSv4:
calls     badcalls  
0         0
</pre>
<p><br />
</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a href="../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html" title="OpenSolaris学习">编辑</a>]</div><a name="IO.E7.9B.91.E8.A7.86"></a><h2>IO监视</h2>
<p>查看io状态很显然的主要用iostat命令。。。
</p><p>默认情况下iostat的输出是：
</p>
<pre>ibmtc@opensolaris:~$ iostat
   tty       cmdk0         cmdk1          sd0            cpu
 tin tout kps tps serv  kps tps serv  kps tps serv   us sy wt id
   0    5   5   0   44    0   0    8    0   0    0    0  0  0 99
 
</pre>
<p>其它常用的有：
</p>
<pre>ibmtc@opensolaris:~$ iostat -D 5 2
   cmdk0         cmdk1          sd0       
rps wps util  rps wps util  rps wps util  
  0   0  0.1    0   0  0.0    0   0  0.0  
  0   0  0.0    0   0  0.0    0   0  0.0  
</pre>
<p>这里我们可以查看到个设备的读写速度
</p><p>如果想看更多的磁盘情况，可以用-l，也可以指定查看特定某几块硬盘的情况。
</p>
<pre>$ iostat -Dl6 sd30 sd31 sd32 sd33 sd34 sd35 5 2
    sd30          sd31          sd32          sd33          sd34          sd35
rps wps util  rps wps util  rps wps util  rps wps util  rps wps util  rps wps util
  0   0  0.0    0   0  0.0    0   0  0.0    0   0  0.0    0   0  0.0    0   0  0.0
  0   0  0.0    0   0  0.0    0   0  0.0    0   0  0.0    0   0  0.0    0   0  0.0
</pre>
<p>一些扩展信息可以用 -x来查看
</p>
<pre>ibmtc@opensolaris:~$ iostat -x 5 2
                 extended device statistics                 
device    r/s    w/s   kr/s   kw/s wait actv  svc_t  %w  %b 
cmdk0     0.0    0.1    2.7    2.8  0.0  0.0   43.7   0   0 
cmdk1     0.0    0.0    0.0    0.0  0.0  0.0    7.6   0   0 
sd0       0.0    0.0    0.0    0.0  0.0  0.0    0.0   0   0 
                 extended device statistics                 
device    r/s    w/s   kr/s   kw/s wait actv  svc_t  %w  %b 
cmdk0     0.0    0.0    0.0    0.0  0.0  0.0    0.0   0   0 
cmdk1     0.0    0.0    0.0    0.0  0.0  0.0    0.0   0   0 
sd0       0.0    0.0    0.0    0.0  0.0  0.0    0.0   0   0 
</pre>
<p>用-p来查看每个分区的具体情况
</p>
<pre>$ iostat -xnmPz 5
                    extended device statistics
    r/s    w/s   kr/s   kw/s wait actv wsvc_t asvc_t  %w  %b device
    0.5    0.2    4.8    1.4  0.0  0.0    5.2    6.7   0   0 c0t0d0s0 (/ )
    0.0    0.0    0.0    0.0  0.0  0.0    0.1   32.0   0   0 c0t0d0s1
    0.0    0.0    0.2    0.0  0.0  0.0    1.1    2.6   0   0 c0t0d0s3 (/extra1 )
    0.0    0.0    0.1    0.0  0.0  0.0    3.1    7.7   0   0 c0t0d0s4 (/extra2 )
    0.0    0.0    0.0    0.0  0.0  0.0   11.9   17.4   0   0 c0t0d0s5 (/extra3 )
    0.0    0.0    0.0    0.0  0.0  0.0   10.3   12.0   0   0 c0t0d0s6 (/extra4 )
    0.0    0.0    0.0    0.0  0.0  0.0    0.0    3.0   0   0 mars:vold(pid512)
</pre>
<p>用-e查看错误信息
</p>
<pre>ibmtc@opensolaris:~$ iostat -xne
                            extended device statistics       ---- errors --- 
    r/s    w/s   kr/s   kw/s wait actv wsvc_t asvc_t  %w  %b s/w h/w trn tot device
    0.0    0.1    2.7    2.8  0.0  0.0   30.9   12.9   0   0   0   0   0   0 c7d0
    0.0    0.0    0.0    0.0  0.0  0.0    0.0    7.6   0   0   0   0   0   0 c8d1
    0.0    0.0    0.0    0.0  0.0  0.0    0.0    0.0   0   0   0   9   0   9 c8t0d0
</pre>
<pre>ibmtc@opensolaris:~$ iostat -E
cmdk0     Soft Errors: 0 Hard Errors: 0 Transport Errors: 0 
Model: HDS728080PLAT20 Revision:  Serial No:       PFD255S5S Size: 80.03GB &lt;80032038912 bytes&gt;
Media Error: 0 Device Not Ready: 0 No Device: 0 Recoverable: 0 
Illegal Request: 0 
cmdk1     Soft Errors: 0 Hard Errors: 0 Transport Errors: 0 
Model: HDS728080PLAT20 Revision:  Serial No:       PFD255S5S Size: 80.03GB &lt;80032038912 bytes&gt;
Media Error: 0 Device Not Ready: 0 No Device: 0 Recoverable: 0 
Illegal Request: 0 
sd0       Soft Errors: 0 Hard Errors: 9 Transport Errors: 0 
Vendor: TSSTcorp Product: DVD-ROM TS-H352C Revision: IB01 Serial No:  
Size: 0.00GB &lt;0 bytes&gt;
Media Error: 0 Device Not Ready: 9 No Device: 0 Recoverable: 0 
Illegal Request: 0 Predictive Failure Analysis: 0
</pre>
<div class="printfooter">
<p>取自"<a href="http://dns.cs.hit.edu.cn../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html">http://dns.cs.hit.edu.cn../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html</a>"</p>

<p>本页面已经被浏览111次。 This page was last modified 09:09 2009年9月7日 by <a href="../../../e/x/c/User%7EExcalibur.html" class="new" title="User:Excalibur">陈盛</a>.  </p>
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'><strong><a href="../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html" title="OpenSolaris学习">编辑本页</a></strong> |
<a href="../../../o/p/e/Talk%7EOpenSolaris%E5%AD%A6%E4%B9%A0_ec60.html" class="new" title="Talk:OpenSolaris学习">讨论本页</a> |
<a href="../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html" title="OpenSolaris学习">较早版本</a> |
<a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a> |
<a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><br />

<br /><a href="../../../index.html" title="首页">首页</a> | <a href="../../../w/i/k/Wikipedia%7E%E5%85%B3%E4%BA%8E.html" title="Wikipedia:关于">关于Wikipedia</a> | <a href="../../../r/e/c/Special%7ERecentchanges.html" title="Special:Recentchanges">最近更改</a> | <form name="search" class="inline" method="post" action="../../../s/e/a/Special%7ESearch.html">
<input type="text" name="search" size="19" value="" />
<input type="submit" name="go" value="进入" />&nbsp;<input type="submit" name="fulltext" value="搜索" />
</form><br /><span id="pagestats">本页面已经被浏览111次。 This page was last modified 09:09 2009年9月7日 by <a href="../../../e/x/c/User%7EExcalibur.html" class="new" title="User:Excalibur">陈盛</a>.  </span></td></tr></table>
</div>
</div>

<div id='quickbar'>
<a href='../../../index.html'><img src='../../../../skins/common/images/wiki.jpg' alt='[首页]' /></a>
<hr class='sep' /><a href="../../../index.html">首页</a>
<br /><a href="../../../c/o/m/WIKI-HIT_IBM_CLUB%7ECommunity_Portal_9150.html">社区</a>
<br /><a href="../../../c/u/r/Current_events.html">新闻动态</a>
<br /><a href="../../../r/e/c/Special%7ERecentchanges.html">最近更改</a>
<br /><a href="../../../r/a/n/Special%7ERandom.html">随机页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E5%B8%AE%E5%8A%A9.html">帮助</a>
<br /><a href="../../../s/i/t/WIKI-HIT_IBM_CLUB%7ESite_support.html">Donations</a>
<br />
<hr class='sep' /><strong><a href="../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html" title="OpenSolaris学习">编辑本页</a></strong>
<br /><a href="../../../o/p/e/Talk%7EOpenSolaris%E5%AD%A6%E4%B9%A0_ec60.html" class="new" title="Talk:OpenSolaris学习">讨论本页</a>
<br /><a href="../../../o/p/e/OpenSolaris%E5%AD%A6%E4%B9%A0_0e3b.html" title="OpenSolaris学习">较早版本</a>
<br /><a href="../../../w/h/a/Special%7EWhatlinkshere.html" title="Special:Whatlinkshere">链入页面</a>
<br /><a href="../../../r/e/c/Special%7ERecentchangeslinked.html" title="Special:Recentchangeslinked">链出更改</a>
<br /><hr class='sep' /><a href="../../../s/p/e/Special%7ESpecialpages.html" title="Special:Specialpages">特殊页面</a>
<br /><a href="../../../w/i/k/Wikipedia%7E%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A.html" title="Wikipedia:错误报告">错误报告</a>
<br /></div>
<!-- Served by dns.cs.hit.edu.cn in 1351393370.84 secs. -->
</body></html>